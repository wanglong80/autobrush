(function(){var e=window.String,t=window.Boolean,n=window.Number,i=window.Object,r=window.Array,o=window.RegExp,a=window.Date,u=window.Function,s=window.Math,f=window.Error,l=window.SyntaxError,c=window.TypeError,p=window.isNaN,h=window.isFinite,d=window.NaN,m=window.Infinity,w=window.btoa,y=window.atob,v=window.parseInt,g=function(){return e.prototype.trim?function(t){return e(t).trim()}:function(t){return e(t).replace(/^\s+|\s+$/g,"")}}(),T=function(){return r.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}}();var x="http://www.w3.org/2001/XMLSchema",I="http://www.w3.org/2005/xpath-functions",N="http://www.w3.org/2000/xmlns/",D="http://www.w3.org/XML/1998/namespace";function O(e,t){this.code=e;this.message=t||E[e]}O.prototype=new f;var E={};E["XPDY0002"]="Evaluation of an expression relies on some part of the dynamic context that has not been assigned a value.";E["XPST0003"]="Expression is not a valid instance of the grammar";E["XPTY0004"]="Type is not appropriate for the context in which the expression occurs";E["XPST0008"]="Expression refers to an element name, attribute name, schema type name, namespace prefix, or variable name that is not defined in the static context";E["XPST0010"]="Axis not supported";E["XPST0017"]="Expanded QName and number of arguments in a function call do not match the name and arity of a function signature";E["XPTY0018"]="The result of the last step in a path expression contains both nodes and atomic values";E["XPTY0019"]="The result of a step (other than the last step) in a path expression contains an atomic value.";E["XPTY0020"]="In an axis step, the context item is not a node.";E["XPST0051"]="It is a static error if a QName that is used as an AtomicType in a SequenceType is not defined in the in-scope schema types as an atomic type.";E["XPST0081"]="A QName used in an expression contains a namespace prefix that cannot be expanded into a namespace URI by using the statically known namespaces.";E["FORG0001"]="Invalid value for cast/constructor.";E["FORG0003"]="fn:zero-or-one called with a sequence containing more than one item.";E["FORG0004"]="fn:one-or-more called with a sequence containing no items.";E["FORG0005"]="fn:exactly-one called with a sequence containing zero or more than one item.";E["FORG0006"]="Invalid argument type.";E["FODC0001"]="No context document.";E["FORX0001"]="Invalid regular expression flags.";E["FOCA0002"]="Invalid lexical value.";E["FOCH0002"]="Unsupported collation.";E["FONS0004"]="No namespace found for prefix.";function P(e){var t=e.match(/\$?(?:(?![0-9-])(?:[\w-]+|\*):)?(?![0-9-])(?:[\w-]+|\*)|\(:|:\)|\/\/|\.\.|::|\d+(?:\.\d*)?(?:[eE][+-]?\d+)?|\.\d+(?:[eE][+-]?\d+)?|"[^"]*(?:""[^"]*)*"|'[^']*(?:''[^']*)*'|<<|>>|[!<>]=|(?![0-9-])[\w-]+:\*|\s+|./g);if(t){var n=0;for(var i=0,r=t.length;i<r;i++)if(t[i]=="(:")n++;else if(t[i]==":)"&&n)n--;else if(!n&&!/^\s/.test(t[i]))this[this.length++]=t[i];if(n)throw new O("XPST0003","Unclosed comment")}}P.prototype.index=0;P.prototype.length=0;P.prototype.reset=function(){this.index=0};P.prototype.peek=function(e){return this[this.index+(e||0)]||""};P.prototype.next=function(e){return(this.index+=e||1)<this.length};P.prototype.back=function(e){return(this.index-=e||1)>0};P.prototype.eof=function(){return this.index>=this.length};function b(){}b.prototype.isNode=function(e){return e&&!!e.nodeType};b.prototype.getProperty=function(e,t){return e[t]};b.prototype.isSameNode=function(e,t){return e==t};b.prototype.compareDocumentPosition=function(e,t){return e.compareDocumentPosition(t)};b.prototype.lookupNamespaceURI=function(e,t){return e.lookupNamespaceURI(t)};b.prototype.getElementById=function(e,t){return e.getElementById(t)};b.prototype.getElementsByTagNameNS=function(e,t,n){return e.getElementsByTagNameNS(t,n)};function R(e,t,n,i){this.staticContext=e;this.item=t;this.scope=n||{};this.stack={};this.DOMAdapter=i||new b;var r=new a,o=r.getTimezoneOffset();this.dateTime=new jt(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()+r.getMilliseconds()/1e3,-o);this.timezone=new Cn(0,s.abs(~~(o/60)),s.abs(o%60),0,o>0)}R.prototype.item=null;R.prototype.position=0;R.prototype.size=0;R.prototype.scope=null;R.prototype.stack=null;R.prototype.dateTime=null;R.prototype.timezone=null;R.prototype.staticContext=null;R.prototype.pushVariable=function(e,t){if(!this.stack.hasOwnProperty(e))this.stack[e]=[];this.stack[e].push(this.scope[e]);this.scope[e]=t};R.prototype.popVariable=function(e){if(this.stack.hasOwnProperty(e)){this.scope[e]=this.stack[e].pop();if(!this.stack[e].length){delete this.stack[e];if(typeof this.scope[e]=="undefined")delete this.scope[e]}}};function M(){this.dataTypes={};this.documents={};this.functions={};this.collations={};this.collections={}}M.prototype.baseURI=null;M.prototype.dataTypes=null;M.prototype.documents=null;M.prototype.functions=null;M.prototype.defaultFunctionNamespace=null;M.prototype.collations=null;M.prototype.defaultCollationName=I+"/collation/codepoint";M.prototype.collections=null;M.prototype.namespaceResolver=null;M.prototype.defaultElementNamespace=null;var A=/^(?:\{([^\}]+)\})?(.+)$/;M.prototype.setDataType=function(e,t){var n=e.match(A);if(n)if(n[1]!=x)this.dataTypes[e]=t};M.prototype.getDataType=function(e){var t=e.match(A);if(t)return t[1]==x?k[o.$2]:this.dataTypes[e]};M.prototype.setDocument=function(e,t){this.documents[e]=t};M.prototype.setFunction=function(e,t){var n=e.match(A);if(n)if(n[1]!=I)this.functions[e]=t};M.prototype.getFunction=function(e){var t=e.match(A);if(t)return t[1]==I?S[o.$2]:this.functions[e]};M.prototype.setCollation=function(e,t){this.collations[e]=t};M.prototype.getCollation=function(e){return this.collations[e]};M.prototype.setCollection=function(e,t){this.collections[e]=t};M.prototype.getURIForPrefix=function(e){var t=this.namespaceResolver,n=t&&t.lookupNamespaceURI?t.lookupNamespaceURI:t,i;if(n instanceof u&&(i=n.call(t,e)))return i;if(e=="fn")return I;if(e=="xs")return x;if(e=="xml")return D;if(e=="xmlns")return N;throw new O("XPST0081","Prefix '"+e+"' has not been declared")};M.js2xs=function(t){if(typeof t=="boolean")t=new Vt(t);else if(typeof t=="number")t=p(t)||!h(t)?new un(t):et(e(t));else t=new An(e(t));return t};M.xs2js=function(e){if(e instanceof Vt)e=e.valueOf();else if(Ct(e))e=e.valueOf();else e=e.toString();return e};var S={},X={},k={},Y={};function _(e,t,n){S[e]=n;X[e]=t}function U(e,t){k[e]=t}function z(e,t){var n=new P(e),i=q(n,t);if(!n.eof())throw new O("XPST0003","Unexpected token beyond end of query");if(!i)throw new O("XPST0003","Expected expression");this.internalExpression=i}z.prototype.internalExpression=null;z.prototype.evaluate=function(e){return this.internalExpression.evaluate(e)};function C(){}C.prototype.equals=function(e,t){throw"Not implemented"};C.prototype.compare=function(e,t){throw"Not implemented"};function G(){}G.ANYSIMPLETYPE_DT=1;G.STRING_DT=2;G.BOOLEAN_DT=3;G.DECIMAL_DT=4;G.FLOAT_DT=5;G.DOUBLE_DT=6;G.DURATION_DT=7;G.DATETIME_DT=8;G.TIME_DT=9;G.DATE_DT=10;G.GYEARMONTH_DT=11;G.GYEAR_DT=12;G.GMONTHDAY_DT=13;G.GDAY_DT=14;G.GMONTH_DT=15;G.HEXBINARY_DT=16;G.BASE64BINARY_DT=17;G.ANYURI_DT=18;G.QNAME_DT=19;G.NOTATION_DT=20;G.NORMALIZEDSTRING_DT=21;G.TOKEN_DT=22;G.LANGUAGE_DT=23;G.NMTOKEN_DT=24;G.NAME_DT=25;G.NCNAME_DT=26;G.ID_DT=27;G.IDREF_DT=28;G.ENTITY_DT=29;G.INTEGER_DT=30;G.NONPOSITIVEINTEGER_DT=31;G.NEGATIVEINTEGER_DT=32;G.LONG_DT=33;G.INT_DT=34;G.SHORT_DT=35;G.BYTE_DT=36;G.NONNEGATIVEINTEGER_DT=37;G.UNSIGNEDLONG_DT=38;G.UNSIGNEDINT_DT=39;G.UNSIGNEDSHORT_DT=40;G.UNSIGNEDBYTE_DT=41;G.POSITIVEINTEGER_DT=42;G.LISTOFUNION_DT=43;G.LIST_DT=44;G.UNAVAILABLE_DT=45;G.DATETIMESTAMP_DT=46;G.DAYMONTHDURATION_DT=47;G.DAYTIMEDURATION_DT=48;G.PRECISIONDECIMAL_DT=49;G.ANYATOMICTYPE_DT=50;G.ANYTYPE_DT=51;G.XT_YEARMONTHDURATION_DT=-1;G.XT_UNTYPEDATOMIC_DT=-2;function F(){this.items=[]}F.prototype.items=null;function q(e,t){var n;if(e.eof()||!(n=V(e,t)))return;var i=new F;i.items.push(n);while(e.peek()==","){e.next();if(e.eof()||!(n=V(e,t)))throw new O("XPST0003","Expected expression");i.items.push(n)}return i}F.prototype.evaluate=function(e){var t=[];for(var n=0,i=this.items.length;n<i;n++)t=Y["concatenate"].call(e,t,this.items[n].evaluate(e));return t};function K(){}function V(e,t){if(!e.eof())return Q(e,t)||L(e,t)||J(e,t)||Ie(e,t)}function B(){this.bindings=[];this.returnExpr=null}B.prototype.bindings=null;B.prototype.returnExpr=null;function L(e,t){if(e.peek()=="for"&&e.peek(1).substr(0,1)=="$"){e.next();var n=new B,i;do{n.bindings.push(H(e,t))}while(e.peek()==","&&e.next());if(e.peek()!="return")throw new O("XPST0003","Expected 'return' token in for expression");e.next();if(e.eof()||!(i=V(e,t)))throw new O("XPST0003","Expected return statement operand in for expression");n.returnExpr=i;return n}}B.prototype.evaluate=function(e){var t=[];(function(n,i){var r=n.bindings[i++],o=r.inExpr.evaluate(e),a=(r.namespaceURI?"{"+r.namespaceURI+"}":"")+r.localName;for(var u=0,s=o.length;u<s;u++){e.pushVariable(a,o[u]);if(i<n.bindings.length)arguments.callee(n,i);else t=t.concat(n.returnExpr.evaluate(e));e.popVariable(a)}})(this,0);return t};function $(e,t,n,i){this.prefix=e;this.localName=t;this.namespaceURI=n;this.inExpr=i}$.prototype.prefix=null;$.prototype.localName=null;$.prototype.namespaceURI=null;$.prototype.inExpr=null;function H(e,t){var n=e.peek().substr(1).match(Fe);if(!n)throw new O("XPST0003","Expected binding in for expression");if(n[1]=="*"||n[2]=="*")throw new O("XPST0003","Illegal use of wildcard in for expression binding variable name");e.next();if(e.peek()!="in")throw new O("XPST0003","Expected 'in' token in for expression binding");e.next();var i;if(e.eof()||!(i=V(e,t)))throw new O("XPST0003","Expected in statement operand in for expression binding");return new $(n[1]||null,n[2],n[1]?t.getURIForPrefix(n[1]):null,i)}function Z(e,t,n){this.condExpr=e;this.thenExpr=t;this.elseExpr=n}Z.prototype.condExpr=null;Z.prototype.thenExpr=null;Z.prototype.elseExpr=null;function Q(e,t){var n,i,r;if(e.peek()=="if"&&e.peek(1)=="("){e.next(2);if(e.eof()||!(n=q(e,t)))throw new O("XPST0003","Expected if statement operand in conditional expression");if(e.peek()!=")")throw new O("XPST0003","Expected ')' token in for expression");e.next();if(e.peek()!="then")throw new O("XPST0003","Expected 'then' token in conditional if expression");e.next();if(e.eof()||!(i=V(e,t)))throw new O("XPST0003","Expected then statement operand in condional expression");if(e.peek()!="else")throw new O("XPST0003","Expected 'else' token in conditional if expression");e.next();if(e.eof()||!(r=V(e,t)))throw new O("XPST0003","Expected else statement operand in condional expression");return new Z(n,i,r)}}Z.prototype.evaluate=function(e){return this[ki(this.condExpr.evaluate(e),e)?"thenExpr":"elseExpr"].evaluate(e)};function j(e){this.quantifier=e;this.bindings=[];this.satisfiesExpr=null}j.prototype.bindings=null;j.prototype.quantifier=null;j.prototype.satisfiesExpr=null;function J(e,t){var n=e.peek();if((n=="some"||n=="every")&&e.peek(1).substr(0,1)=="$"){e.next();var i=new j(n),r;do{i.bindings.push(ee(e,t))}while(e.peek()==","&&e.next());if(e.peek()!="satisfies")throw new O("XPST0003","Expected 'satisfies' token in quantified expression");e.next();if(e.eof()||!(r=V(e,t)))throw new O("XPST0003","Expected satisfies statement operand in quantified expression");i.satisfiesExpr=r;return i}}j.prototype.evaluate=function(e){var t=this.quantifier=="every",n=t?true:false;(function(i,r){var o=i.bindings[r++],a=o.inExpr.evaluate(e),u=(o.namespaceURI?"{"+o.namespaceURI+"}":"")+o.localName;for(var s=0,f=a.length;s<f&&(t?n:!n);s++){e.pushVariable(u,a[s]);if(r<i.bindings.length)arguments.callee(i,r);else n=ki(i.satisfiesExpr.evaluate(e),e);e.popVariable(u)}})(this,0);return[new Vt(n)]};function W(e,t,n,i){this.prefix=e;this.localName=t;this.namespaceURI=n;this.inExpr=i}W.prototype.prefix=null;W.prototype.localName=null;W.prototype.namespaceURI=null;W.prototype.inExpr=null;function ee(e,t){var n=e.peek().substr(1).match(Fe);if(!n)throw new O("XPST0003","Expected binding in quantified expression");if(n[1]=="*"||n[2]=="*")throw new O("XPST0003","Illegal use of wildcard in quantified expression binding variable name");e.next();if(e.peek()!="in")throw new O("XPST0003","Expected 'in' token in quantified expression binding");e.next();var i;if(e.eof()||!(i=V(e,t)))throw new O("XPST0003","Expected in statement operand in quantified expression binding");return new W(n[1]||null,n[2],n[1]?t.getURIForPrefix(n[1]):null,i)}function te(e,t,n){this.left=e;this.right=t;this.operator=n}te.prototype.left=null;te.prototype.right=null;te.prototype.operator=null;function ne(e,t){var n,i;if(e.eof()||!(n=yt(e,t)))return;if(!(e.peek()in fe))return n;var r=e.peek();e.next();if(e.eof()||!(i=yt(e,t)))throw new O("XPST0003","Expected second operand in comparison expression");return new te(n,i,r)}te.prototype.evaluate=function(e){var t=fe[this.operator](this,e);return t==null?[]:[t]};function ie(e,t){var n=Yi(e.left.evaluate(t),t);if(!n.length)return new Vt(false);var i=Yi(e.right.evaluate(t),t);if(!i.length)return new Vt(false);var r=false;for(var o=0,a=n.length,u,s;o<a&&!r;o++){for(var f=0,l=i.length,c,p;f<l&&!r;f++){s=n[o];p=i[f];u=s instanceof Yn;c=p instanceof Yn;if(u&&c){s=An.cast(s);p=An.cast(p)}else{if(u){if(p instanceof Cn)s=Cn.cast(s);else if(p instanceof _n)s=_n.cast(s);else if(p.primitiveKind)s=k[p.primitiveKind].cast(s)}else if(c){if(s instanceof Cn)p=Cn.cast(p);else if(s instanceof _n)p=_n.cast(p);else if(s.primitiveKind)p=k[s.primitiveKind].cast(p)}if(s instanceof Gt)s=An.cast(s);if(p instanceof Gt)p=An.cast(p)}r=ae[re[e.operator]](s,p,t).valueOf()}}return new Vt(r)}var re={"=":"eq","!=":"ne",">":"gt","<":"lt",">=":"ge","<=":"le"};function oe(e,t){var n=Yi(e.left.evaluate(t),t);if(!n.length)return null;ht(t,n,"?","first operand of '"+e.operator+"'");var i=Yi(e.right.evaluate(t),t);if(!i.length)return null;ht(t,i,"?","second operand of '"+e.operator+"'");var r=n[0],o=i[0];if(r instanceof Yn)r=An.cast(r);if(o instanceof Yn)o=An.cast(o);if(r instanceof Gt)r=An.cast(r);if(o instanceof Gt)o=An.cast(o);return ae[e.operator](r,o,t)}var ae={};ae["eq"]=function(e,t,n){var i="";if(Ct(e)){if(Ct(t))i="numeric-equal"}else if(e instanceof Vt){if(t instanceof Vt)i="boolean-equal"}else if(e instanceof An){if(t instanceof An)return Y["numeric-equal"].call(n,S["compare"].call(n,e,t),new qn(0))}else if(e instanceof Lt){if(t instanceof Lt)i="date-equal"}else if(e instanceof Sn){if(t instanceof Sn)i="time-equal"}else if(e instanceof jt){if(t instanceof jt)i="dateTime-equal"}else if(e instanceof fn){if(t instanceof fn)i="duration-equal"}else if(e instanceof Dn){if(t instanceof Dn)i="gYearMonth-equal"}else if(e instanceof In){if(t instanceof In)i="gYear-equal"}else if(e instanceof Tn){if(t instanceof Tn)i="gMonthDay-equal"}else if(e instanceof vn){if(t instanceof vn)i="gMonth-equal"}else if(e instanceof wn){if(t instanceof wn)i="gDay-equal"}else if(e instanceof Rn){if(t instanceof Rn)i="QName-equal"}else if(e instanceof En){if(t instanceof En)i="hexBinary-equal"}else if(e instanceof qt){if(t instanceof qt)i="base64Binary-equal"}if(i)return Y[i].call(n,e,t);throw new O("XPTY0004","Cannot compare values of given types")};ae["ne"]=function(e,t,n){return new Vt(!ae["eq"](e,t,n).valueOf())};ae["gt"]=function(e,t,n){var i="";if(Ct(e)){if(Ct(t))i="numeric-greater-than"}else if(e instanceof Vt){if(t instanceof Vt)i="boolean-greater-than"}else if(e instanceof An){if(t instanceof An)return Y["numeric-greater-than"].call(n,S["compare"].call(n,e,t),new qn(0))}else if(e instanceof Lt){if(t instanceof Lt)i="date-greater-than"}else if(e instanceof Sn){if(t instanceof Sn)i="time-greater-than"}else if(e instanceof jt){if(t instanceof jt)i="dateTime-greater-than"}else if(e instanceof _n){if(t instanceof _n)i="yearMonthDuration-greater-than"}else if(e instanceof Cn){if(t instanceof Cn)i="dayTimeDuration-greater-than"}if(i)return Y[i].call(n,e,t);throw new O("XPTY0004","Cannot compare values of given types")};ae["lt"]=function(e,t,n){var i="";if(Ct(e)){if(Ct(t))i="numeric-less-than"}else if(e instanceof Vt){if(t instanceof Vt)i="boolean-less-than"}else if(e instanceof An){if(t instanceof An)return Y["numeric-less-than"].call(n,S["compare"].call(n,e,t),new qn(0))}else if(e instanceof Lt){if(t instanceof Lt)i="date-less-than"}else if(e instanceof Sn){if(t instanceof Sn)i="time-less-than"}else if(e instanceof jt){if(t instanceof jt)i="dateTime-less-than"}else if(e instanceof _n){if(t instanceof _n)i="yearMonthDuration-less-than"}else if(e instanceof Cn){if(t instanceof Cn)i="dayTimeDuration-less-than"}if(i)return Y[i].call(n,e,t);throw new O("XPTY0004","Cannot compare values of given types")};ae["ge"]=function(e,t,n){var i="";if(Ct(e)){if(Ct(t))i="numeric-less-than"}else if(e instanceof Vt){if(t instanceof Vt)i="boolean-less-than"}else if(e instanceof An){if(t instanceof An)return Y["numeric-greater-than"].call(n,S["compare"].call(n,e,t),new qn(-1))}else if(e instanceof Lt){if(t instanceof Lt)i="date-less-than"}else if(e instanceof Sn){if(t instanceof Sn)i="time-less-than"}else if(e instanceof jt){if(t instanceof jt)i="dateTime-less-than"}else if(e instanceof _n){if(t instanceof _n)i="yearMonthDuration-less-than"}else if(e instanceof Cn){if(t instanceof Cn)i="dayTimeDuration-less-than"}if(i)return new Vt(!Y[i].call(n,e,t).valueOf());throw new O("XPTY0004","Cannot compare values of given types")};ae["le"]=function(e,t,n){var i="";if(Ct(e)){if(Ct(t))i="numeric-greater-than"}else if(e instanceof Vt){if(t instanceof Vt)i="boolean-greater-than"}else if(e instanceof An){if(t instanceof An)return Y["numeric-less-than"].call(n,S["compare"].call(n,e,t),new qn(1))}else if(e instanceof Lt){if(t instanceof Lt)i="date-greater-than"}else if(e instanceof Sn){if(t instanceof Sn)i="time-greater-than"}else if(e instanceof jt){if(t instanceof jt)i="dateTime-greater-than"}else if(e instanceof _n){if(t instanceof _n)i="yearMonthDuration-greater-than"}else if(e instanceof Cn){if(t instanceof Cn)i="dayTimeDuration-greater-than"}if(i)return new Vt(!Y[i].call(n,e,t).valueOf());throw new O("XPTY0004","Cannot compare values of given types")};function ue(e,t){var n=e.left.evaluate(t);if(!n.length)return null;ht(t,n,"?","first operand of '"+e.operator+"'");pt(t,n,ci,"first operand of '"+e.operator+"'");var i=e.right.evaluate(t);if(!i.length)return null;ht(t,i,"?","second operand of '"+e.operator+"'");pt(t,i,ci,"second operand of '"+e.operator+"'");return se[e.operator](n[0],i[0],t)}var se={};se["is"]=function(e,t,n){return Y["is-same-node"].call(n,e,t)};se[">>"]=function(e,t,n){return Y["node-after"].call(n,e,t)};se["<<"]=function(e,t,n){return Y["node-before"].call(n,e,t)};var fe={"=":ie,"!=":ie,"<":ie,"<=":ie,">":ie,">=":ie,eq:oe,ne:oe,lt:oe,le:oe,gt:oe,ge:oe,is:ue,">>":ue,"<<":ue};function le(e){this.left=e;this.items=[]}le.prototype.left=null;le.prototype.items=null;var ce={};ce["+"]=function(e,t,n){var i="",r=false;if(Ct(e)){if(Ct(t))i="numeric-add"}else if(e instanceof Lt){if(t instanceof _n)i="add-yearMonthDuration-to-date";else if(t instanceof Cn)i="add-dayTimeDuration-to-date"}else if(e instanceof _n){if(t instanceof Lt){i="add-yearMonthDuration-to-date";r=true}else if(t instanceof jt){i="add-yearMonthDuration-to-dateTime";r=true}else if(t instanceof _n)i="add-yearMonthDurations"}else if(e instanceof Cn){if(t instanceof Lt){i="add-dayTimeDuration-to-date";r=true}else if(t instanceof Sn){i="add-dayTimeDuration-to-time";r=true}else if(t instanceof jt){i="add-dayTimeDuration-to-dateTime";r=true}else if(t instanceof Cn)i="add-dayTimeDurations"}else if(e instanceof Sn){if(t instanceof Cn)i="add-dayTimeDuration-to-time"}else if(e instanceof jt){if(t instanceof _n)i="add-yearMonthDuration-to-dateTime";else if(t instanceof Cn)i="add-dayTimeDuration-to-dateTime"}if(i)return Y[i].call(n,r?t:e,r?e:t);throw new O("XPTY0004","Arithmetic operator is not defined for provided arguments")};ce["-"]=function(e,t,n){var i="";if(Ct(e)){if(Ct(t))i="numeric-subtract"}else if(e instanceof Lt){if(t instanceof Lt)i="subtract-dates";else if(t instanceof _n)i="subtract-yearMonthDuration-from-date";else if(t instanceof Cn)i="subtract-dayTimeDuration-from-date"}else if(e instanceof Sn){if(t instanceof Sn)i="subtract-times";else if(t instanceof Cn)i="subtract-dayTimeDuration-from-time"}else if(e instanceof jt){if(t instanceof jt)i="subtract-dateTimes";else if(t instanceof _n)i="subtract-yearMonthDuration-from-dateTime";else if(t instanceof Cn)i="subtract-dayTimeDuration-from-dateTime"}else if(e instanceof _n){if(t instanceof _n)i="subtract-yearMonthDurations"}else if(e instanceof Cn){if(t instanceof Cn)i="subtract-dayTimeDurations"}if(i)return Y[i].call(n,e,t);throw new O("XPTY0004","Arithmetic operator is not defined for provided arguments")};function pe(e,t){var n;if(e.eof()||!(n=me(e,t)))return;if(!(e.peek()in ce))return n;var i=new le(n),r;while((r=e.peek())in ce){e.next();if(e.eof()||!(n=me(e,t)))throw new O("XPST0003","Expected second operand in additive expression");i.items.push([r,n])}return i}le.prototype.evaluate=function(e){var t=Yi(this.left.evaluate(e),e);if(!t.length)return[];ht(e,t,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];if(n instanceof Yn)n=un.cast(n);for(var i=0,r=this.items.length,o,a;i<r;i++){o=Yi(this.items[i][1].evaluate(e),e);if(!o.length)return[];ht(e,o,"?","first operand of '"+this.items[i][0]+"'");a=o[0];if(a instanceof Yn)a=un.cast(a);n=ce[this.items[i][0]](n,a,e)}return[n]};function he(e){this.left=e;this.items=[]}he.prototype.left=null;he.prototype.items=null;var de={};de["*"]=function(e,t,n){var i="",r=false;if(Ct(e)){if(Ct(t))i="numeric-multiply";else if(t instanceof _n){i="multiply-yearMonthDuration";r=true}else if(t instanceof Cn){i="multiply-dayTimeDuration";r=true}}else{if(e instanceof _n){if(Ct(t))i="multiply-yearMonthDuration"}else if(e instanceof Cn){if(Ct(t))i="multiply-dayTimeDuration"}}if(i)return Y[i].call(n,r?t:e,r?e:t);throw new O("XPTY0004","Arithmetic operator is not defined for provided arguments")};de["div"]=function(e,t,n){var i="";if(Ct(e)){if(Ct(t))i="numeric-divide"}else if(e instanceof _n){if(Ct(t))i="divide-yearMonthDuration";else if(t instanceof _n)i="divide-yearMonthDuration-by-yearMonthDuration"}else if(e instanceof Cn){if(Ct(t))i="divide-dayTimeDuration";else if(t instanceof Cn)i="divide-dayTimeDuration-by-dayTimeDuration"}if(i)return Y[i].call(n,e,t);throw new O("XPTY0004","Arithmetic operator is not defined for provided arguments")};de["idiv"]=function(e,t,n){if(Ct(e)&&Ct(t))return Y["numeric-integer-divide"].call(n,e,t);throw new O("XPTY0004","Arithmetic operator is not defined for provided arguments")};de["mod"]=function(e,t,n){if(Ct(e)&&Ct(t))return Y["numeric-mod"].call(n,e,t);throw new O("XPTY0004","Arithmetic operator is not defined for provided arguments")};function me(e,t){var n;if(e.eof()||!(n=gt(e,t)))return;if(!(e.peek()in de))return n;var i=new he(n),r;while((r=e.peek())in de){e.next();if(e.eof()||!(n=gt(e,t)))throw new O("XPST0003","Expected second operand in multiplicative expression");i.items.push([r,n])}return i}he.prototype.evaluate=function(e){var t=Yi(this.left.evaluate(e),e);if(!t.length)return[];ht(e,t,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];if(n instanceof Yn)n=un.cast(n);for(var i=0,r=this.items.length,o,a;i<r;i++){o=Yi(this.items[i][1].evaluate(e),e);if(!o.length)return[];ht(e,o,"?","second operand of '"+this.items[i][0]+"'");a=o[0];if(a instanceof Yn)a=un.cast(a);n=de[this.items[i][0]](n,a,e)}return[n]};function we(e,t){this.operator=e;this.expression=t}we.prototype.operator=null;we.prototype.expression=null;var ye={};ye["-"]=function(e,t){if(Ct(e))return Y["numeric-unary-minus"].call(t,e);throw new O("XPTY0004","Arithmetic operator is not defined for provided arguments")};ye["+"]=function(e,t){if(Ct(e))return Y["numeric-unary-plus"].call(t,e);throw new O("XPTY0004","Arithmetic operator is not defined for provided arguments")};function ve(e,t){if(e.eof())return;if(!(e.peek()in ye))return Te(e,t);var n="+",i;while(e.peek()in ye){if(e.peek()=="-")n=n=="-"?"+":"-";e.next()}if(e.eof()||!(i=Te(e,t)))throw new O("XPST0003","Expected operand in unary expression");return new we(n,i)}we.prototype.evaluate=function(e){var t=Yi(this.expression.evaluate(e),e);if(!t.length)return[];ht(e,t,"?","second operand of '"+this.operator+"'");var n=t[0];if(n instanceof Yn)n=un.cast(n);return[ye[this.operator](n,e)]};function ge(){}function Te(e,t){return ke(e,t)}function xe(e){this.left=e;this.items=[]}xe.prototype.left=null;xe.prototype.items=null;function Ie(e,t){var n;if(e.eof()||!(n=De(e,t)))return;if(e.peek()!="or")return n;var i=new xe(n);while(e.peek()=="or"){e.next();if(e.eof()||!(n=De(e,t)))throw new O("XPST0003","Expected second operand in logical expression");i.items.push(n)}return i}xe.prototype.evaluate=function(e){var t=ki(this.left.evaluate(e),e);for(var n=0,i=this.items.length;n<i&&!t;n++)t=ki(this.items[n].evaluate(e),e);return[new Vt(t)]};function Ne(e){this.left=e;this.items=[]}Ne.prototype.left=null;Ne.prototype.items=null;function De(e,t){var n;if(e.eof()||!(n=ne(e,t)))return;if(e.peek()!="and")return n;var i=new Ne(n);while(e.peek()=="and"){e.next();if(e.eof()||!(n=ne(e,t)))throw new O("XPST0003","Expected second operand in logical expression");i.items.push(n)}return i}Ne.prototype.evaluate=function(e){var t=ki(this.left.evaluate(e),e);for(var n=0,i=this.items.length;n<i&&t;n++)t=ki(this.items[n].evaluate(e),e);return[new Vt(t)]};function Oe(){}Oe.prototype.predicates=null;function Ee(e,t){if(!e.eof())return ot(e,t)||Me(e,t)}function Pe(e,t,n){var i;while(e.peek()=="["){e.next();if(e.eof()||!(i=q(e,t)))throw new O("XPST0003","Expected expression in predicate");n.predicates.push(i);if(e.peek()!="]")throw new O("XPST0003","Expected ']' token in predicate");e.next()}}Oe.prototype.applyPredicates=function(e,t){var n=t.item,i=t.position,r=t.size;for(var o=0,a,u=this.predicates.length;o<u;o++){a=e;e=[];for(var s=0,f,l=a.length;s<l;s++){t.item=a[s];t.position=s+1;t.size=l;f=this.predicates[o].evaluate(t);if(f.length==1&&Ct(f[0])){if(f[0].valueOf()==s+1)e.push(a[s])}else if(ki(f,t))e.push(a[s])}}t.item=n;t.position=i;t.size=r;return e};function be(e,t){this.axis=e;this.test=t;this.predicates=[]}be.prototype=new Oe;be.prototype.axis=null;be.prototype.test=null;var Re={};Re["attribute"]={};Re["child"]={};Re["descendant"]={};Re["descendant-or-self"]={};Re["following"]={};Re["following-sibling"]={};Re["self"]={};Re["ancestor"]={};Re["ancestor-or-self"]={};Re["parent"]={};Re["preceding"]={};Re["preceding-sibling"]={};function Me(e,t){var n=e.peek(),i,r;if(e.peek(1)=="::"){if(!(n in Re))throw new O("XPST0003","Unknown axis name: "+n);e.next(2);if(e.eof()||!(i=_e(e,t)))throw new O("XPST0003","Expected node test expression in axis step");r=new be(n,i)}else if(n==".."){e.next();r=new be("parent",new Ue("node"))}else if(n=="@"){e.next();if(e.eof()||!(i=_e(e,t)))throw new O("XPST0003","Expected node test expression in axis step");r=new be("attribute",i)}else{if(e.eof()||!(i=_e(e,t)))return;r=new be(i instanceof Ue&&i.name=="attribute"?"attribute":"child",i)}Pe(e,t,r);return r}be.prototype.evaluate=function(e){var t=e.item;if(!e.DOMAdapter.isNode(t))throw new O("XPTY0020");var n=[],i=e.DOMAdapter.getProperty,r=i(t,"nodeType");switch(this.axis){case"attribute":if(r==1)for(var o=i(t,"attributes"),a=0,u=o.length;a<u;a++)n.push(o[a]);break;case"child":for(var s=i(t,"firstChild");s;s=i(s,"nextSibling"))n.push(s);break;case"descendant-or-self":n.push(t);case"descendant":Ae(i(t,"firstChild"),n,i);break;case"following":for(var f=t,l;f;f=i(f,"parentNode"))if(l=i(f,"nextSibling"))Ae(l,n,i);break;case"following-sibling":for(var s=t;s=i(s,"nextSibling");)n.push(s);break;case"self":n.push(t);break;case"ancestor-or-self":n.push(t);case"ancestor":for(var s=r==2?i(t,"ownerElement"):t;s=i(s,"parentNode");)n.push(s);break;case"parent":var f=r==2?i(t,"ownerElement"):i(t,"parentNode");if(f)n.push(f);break;case"preceding":for(var f=t,l;f;f=i(f,"parentNode"))if(l=i(f,"previousSibling"))Se(l,n,i);break;case"preceding-sibling":for(var s=t;s=i(s,"previousSibling");)n.push(s);break}if(n.length&&!(this.test instanceof Ue&&this.test.name=="node")){var c=n;n=[];for(var a=0,u=c.length;a<u;a++){if(this.test.test(c[a],e))n.push(c[a])}}if(n.length&&this.predicates.length)n=this.applyPredicates(n,e);switch(this.axis){case"ancestor":case"ancestor-or-self":case"parent":case"preceding":case"preceding-sibling":n.reverse()}return n};function Ae(e,t,n){for(var i;e;e=n(e,"nextSibling")){t.push(e);if(i=n(e,"firstChild"))Ae(i,t,n)}}function Se(e,t,n){for(var i;e;e=n(e,"previousSibling")){if(i=n(e,"lastChild"))Se(i,t,n);t.push(e)}}function Xe(){this.items=[]}Xe.prototype.items=null;function ke(e,t){if(e.eof())return;var n="/",i="/"+"/";var r=new Xe,o=e.peek(),a;if(o==i||o==n){e.next();r.items.push(new st(null,"root",I));if(o==i)r.items.push(new be("descendant-or-self",new Ue("node")))}if(e.eof()||!(a=Ee(e,t))){if(o==n)return r.items[0];if(o==i)throw new O("XPST0003","Expected path step expression");return}r.items.push(a);while((o=e.peek())==n||o==i){if(o==i)r.items.push(new be("descendant-or-self",new Ue("node")));e.next();if(e.eof()||!(a=Ee(e,t)))throw new O("XPST0003","Expected path step expression");r.items.push(a)}if(r.items.length==1)return r.items[0];return r}Xe.prototype.evaluate=function(e){var t=e.item;var n=[t];for(var i=0,r=this.items.length,o;i<r;i++){o=[];for(var a=0,u=n.length;a<u;a++){e.item=n[a];for(var s=0,f=this.items[i].evaluate(e),l=f.length;s<l;s++)if(i<r-1&&!e.DOMAdapter.isNode(f[s]))throw new O("XPTY0019");else if(T(o,f[s])==-1)o.push(f[s])}n=o}e.item=t;return _i(n,e)};function Ye(){}function _e(e,t){if(!e.eof())return Ce(e,t)||qe(e,t)}function Ue(e){this.name=e;this.args=[]}Ue.prototype=new Ye;Ue.prototype.name=null;Ue.prototype.args=null;var ze={};ze["document-node"]={};ze["element"]={};ze["attribute"]={};ze["processing-instruction"]={};ze["comment"]={};ze["text"]={};ze["node"]={};ze["schema-element"]={};ze["schema-attribute"]={};function Ce(e,t){var n=e.peek();if(e.peek(1)=="("){if(!(n in ze))throw new O("XPST0003","Unknown '"+n+"' kind test");e.next(2);var i=new Ue(n);if(e.peek()!=")"){if(n=="document-node"){}else if(n=="element"){}else if(n=="attribute"){}else if(n=="processing-instruction"){}else if(n=="schema-attribute"){}else if(n=="schema-element"){}}else{if(n=="schema-attribute")throw new O("XPST0003","Expected attribute declaration in 'schema-attribute' kind test");else if(n=="schema-element")throw new O("XPST0003","Expected element declaration in 'schema-element' kind test")}if(e.peek()!=")")throw new O("XPST0003","Expected ')' token in kind test");e.next();return i}}Ue.prototype.test=function(e,t){var n=t.DOMAdapter.getProperty,i=t.DOMAdapter.isNode(e)?n(e,"nodeType"):0;switch(this.name){case"node":return!!i;case"attribute":if(i!=2)return false;break;case"document-node":return i==9;case"element":return i==1;case"processing-instruction":if(i!=7)return false;break;case"comment":return i==8;case"text":return i==3||i==4;case"schema-attribute":throw"KindTest '"+"schema-attribute"+"' not implemented";case"schema-element":throw"KindTest '"+"schema-element"+"' not implemented"}if(i==2)return n(e,"prefix")!="xmlns"&&n(e,"localName")!="xmlns";if(i==7)return n(e,"target")!="xml";return true};function Ge(e,t,n){this.prefix=e;this.localName=t;this.namespaceURI=n}Ge.prototype=new Ye;Ge.prototype.prefix=null;Ge.prototype.localName=null;Ge.prototype.namespaceURI=null;var Fe=/^(?:(?![0-9-])([\w-]+|\*)\:)?(?![0-9-])([\w-]+|\*)$/;function qe(e,t){var n=e.peek().match(Fe);if(n){if(n[1]=="*"&&n[2]=="*")throw new O("XPST0003","Illegal use of *:* wildcard in name test");e.next();return new Ge(n[1]||null,n[2],n[1]?n[1]=="*"?"*":t.getURIForPrefix(n[1])||null:t.defaultElementNamespace)}}Ge.prototype.test=function(e,t){var n=t.DOMAdapter.getProperty,i=n(e,"nodeType");if(i==1||i==2){if(this.localName=="*")return(i==1||n(e,"prefix")!="xmlns"&&n(e,"localName")!="xmlns")&&(!this.prefix||n(e,"namespaceURI")==this.namespaceURI);
if(this.localName==n(e,"localName"))return this.namespaceURI=="*"||i==2&&!this.prefix&&!n(e,"prefix")||n(e,"namespaceURI")==this.namespaceURI}return false};function Ke(){}function Ve(e,t){if(!e.eof())return He(e,t)||Le(e,t)||ft(e,t)||ut(e,t)||Qe(e,t)}function Be(e){this.expression=e}function Le(e,t){if(e.peek()=="("){e.next();var n=null;if(e.peek()!=")")n=q(e,t);if(e.peek()!=")")throw new O("XPST0003","Expected ')' token in parenthesized expression");e.next();return new Be(n)}}Be.prototype.evaluate=function(e){return this.expression?this.expression.evaluate(e):[]};function $e(){}function He(e,t){if(e.peek()=="."){e.next();return new $e}}$e.prototype.evaluate=function(e){if(e.item==null)throw new O("XPDY0002","Dynamic context does not have context item initialized");return[e.item]};function Ze(){}Ze.prototype.value=null;function Qe(e,t){if(!e.eof())return We(e,t)||it(e,t)}Ze.prototype.evaluate=function(e){return[this.value]};function je(e){this.value=e}je.prototype=new Ze;var Je=/^[+\-]?(?:(?:(\d+)(?:\.(\d*))?)|(?:\.(\d+)))(?:[eE]([+-])?(\d+))?$/;function We(e,t){var n=e.peek(),i=et(n);if(i){e.next();return new je(i)}}function et(e){var t=e.match(Je);if(t){var n=qn;if(t[5])n=un;else if(t[2]||t[3])n=on;return new n(+e)}}function tt(e){this.value=e}tt.prototype=new Ze;var nt=/^'([^']*(?:''[^']*)*)'|"([^"]*(?:""[^"]*)*)"$/;function it(e,t){var n=e.peek().match(nt);if(n){e.next();return new tt(new An(n[1]?n[1].replace("''","'"):n[2]?n[2].replace('""','"'):""))}}function rt(e){this.expression=e;this.predicates=[]}rt.prototype=new Oe;rt.prototype.expression=null;function ot(e,t){var n;if(e.eof()||!(n=Ve(e,t)))return;var i=new rt(n);Pe(e,t,i);if(i.predicates.length==0)return i.expression;return i}rt.prototype.evaluate=function(e){var t=this.expression.evaluate(e);if(this.predicates.length&&t.length)t=this.applyPredicates(t,e);return t};function at(e,t,n){this.prefix=e;this.localName=t;this.namespaceURI=n}at.prototype.prefix=null;at.prototype.localName=null;at.prototype.namespaceURI=null;function ut(e,t){if(e.peek().substr(0,1)=="$"){var n=e.peek().substr(1).match(Fe);if(n){if(n[1]=="*"||n[2]=="*")throw new O("XPST0003","Illegal use of wildcard in var expression variable name");var i=new at(n[1]||null,n[2],n[1]?t.getURIForPrefix(n[1]):null);e.next();return i}}}at.prototype.evaluate=function(e){var t=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(e.scope.hasOwnProperty(t))return[e.scope[t]];throw new O("XPST0008","Variable $"+(this.prefix?this.prefix+":":"")+this.localName+" has not been declared")};function st(e,t,n){this.prefix=e;this.localName=t;this.namespaceURI=n;this.args=[]}st.prototype.prefix=null;st.prototype.localName=null;st.prototype.namespaceURI=null;st.prototype.args=null;function ft(e,t){var n=e.peek().match(Fe);if(n&&e.peek(1)=="("){if(!n[1]&&n[2]in ze)return Me(e,t);if(n[1]=="*"||n[2]=="*")throw new O("XPST0003","Illegal use of wildcard in function name");var i=new st(n[1]||null,n[2],n[1]?t.getURIForPrefix(n[1])||null:t.defaultFunctionNamespace),r;e.next(2);if(e.peek()!=")"){do{if(e.eof()||!(r=V(e,t)))throw new O("XPST0003","Expected function call argument");i.args.push(r)}while(e.peek()==","&&e.next());if(e.peek()!=")")throw new O("XPST0003","Expected ')' token in function call")}e.next();return i}}st.prototype.evaluate=function(e){var t=[],n,i;for(var o=0,a=this.args.length;o<a;o++)t.push(this.args[o].evaluate(e));var u=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(this.namespaceURI==I){if(i=S[this.localName]){if(n=X[this.localName])ct(this.localName,n,i,t,e);var s=i.apply(e,t);return s==null?[]:s instanceof r?s:[s]}throw new O("XPST0017","Unknown system function: "+u+"()")}else if(this.namespaceURI==x){if((i=k[this.localName])&&this.localName!="NOTATION"&&this.localName!="anyAtomicType"){ct(this.localName,[[zt]],i,t,e);return[i.cast(t[0])]}throw new O("XPST0017","Unknown type constructor function: "+u+"()")}else if(i=e.staticContext.getFunction(u)){var s=i.apply(e,t);return s==null?[]:s instanceof r?s:[s]}throw new O("XPST0017","Unknown user function: "+u+"()")};var lt=["first","second","third","fourth","fifth"];function ct(e,t,n,i,r){var o,a=i.length,u,s=t.length,f=0;while(f<t.length&&!t[f][2])f++;if(a>s)throw new O("XPST0017","Function "+e+"() must have "+(s?" no more than ":"")+s+" argument"+(s>1||!s?"s":""));else if(a<f)throw new O("XPST0017","Function "+e+"() must have "+(f==s?"exactly":"at least")+" "+f+" argument"+(s>1?"s":""));for(var l=0;l<a;l++){u=t[l];o=i[l];ht(r,o,u[1],lt[l]+" argument of "+e+"()");pt(r,o,u[0],lt[l]+" argument of "+e+"()");if(u[1]!="+"&&u[1]!="*")i[l]=o.length?o[0]:null}}function pt(e,t,n,i){for(var r=0,o=t.length,a,u;r<o;r++){u=t[r];if(n==ci||n.prototype instanceof ci){if(!e.DOMAdapter.isNode(u))throw new O("XPTY0004","Required item type of "+i+" is "+n);if(n!=ci){a=e.DOMAdapter.getProperty(u,"nodeType");if([null,mi,pi,yi,yi,null,null,wi,hi,di,null,null,null][a]!=n)throw new O("XPTY0004","Required item type of "+i+" is "+n)}}else if(n==zt||n.prototype instanceof zt){u=Yi([u],e)[0];if(n!=zt){if(u instanceof Yn)u=n.cast(u);else if(n==An){if(u instanceof Gt)u=An.cast(u)}else if(n==un){if(Ct(u))u=n.cast(u)}}if(!(u instanceof n))throw new O("XPTY0004","Required item type of "+i+" is "+n);t[r]=u}}}function ht(e,t,n,i){var r=t.length;if(n=="?"){if(r>1)throw new O("XPTY0004","Required cardinality of "+i+" is one or zero")}else if(n=="+"){if(r<1)throw new O("XPTY0004","Required cardinality of "+i+" is one or more")}else if(n!="*"){if(r!=1)throw new O("XPTY0004","Required cardinality of "+i+" is exactly one")}}function dt(e){this.left=e;this.items=[]}dt.prototype.left=null;dt.prototype.items=null;function mt(e,t){var n,i;if(e.eof()||!(n=xt(e,t)))return;if(!((i=e.peek())=="intersect"||i=="except"))return n;var r=new dt(n);while((i=e.peek())=="intersect"||i=="except"){e.next();if(e.eof()||!(n=xt(e,t)))throw new O("XPST0003","Expected second operand in "+i+" expression");r.items.push([i,n])}return r}dt.prototype.evaluate=function(e){var t=this.left.evaluate(e);for(var n=0,i=this.items.length,r;n<i;n++)t=Y[(r=this.items[n])[0]].call(e,t,r[1].evaluate(e));return t};function wt(e,t){this.left=e;this.right=t}wt.prototype.left=null;wt.prototype.right=null;function yt(e,t){var n,i;if(e.eof()||!(n=pe(e,t)))return;if(e.peek()!="to")return n;e.next();if(e.eof()||!(i=pe(e,t)))throw new O("XPST0003","Expected second operand in range expression");return new wt(n,i)}wt.prototype.evaluate=function(e){var t=this.left.evaluate(e);if(!t.length)return[];var n="first operand of 'to'";ht(e,t,"?",n);pt(e,t,qn,n);var i=this.right.evaluate(e);if(!i.length)return[];n="second operand of 'to'";ht(e,i,"?",n);pt(e,i,qn,n);return Y["to"].call(e,t[0],i[0])};function vt(e){this.left=e;this.items=[]}vt.prototype.left=null;vt.prototype.items=null;function gt(e,t){var n,i;if(e.eof()||!(n=mt(e,t)))return;if(!((i=e.peek())=="|"||i=="union"))return n;var r=new vt(n);while((i=e.peek())=="|"||i=="union"){e.next();if(e.eof()||!(n=mt(e,t)))throw new O("XPST0003","Expected second operand in union expression");r.items.push(n)}return r}vt.prototype.evaluate=function(e){var t=this.left.evaluate(e);for(var n=0,i=this.items.length;n<i;n++)t=Y["union"].call(e,t,this.items[n].evaluate(e));return t};function Tt(e,t){this.expression=e;this.type=t}Tt.prototype.expression=null;Tt.prototype.type=null;function xt(e,t){var n,i;if(e.eof()||!(n=Nt(e,t)))return;if(!(e.peek()=="instance"&&e.peek(1)=="of"))return n;e.next(2);if(e.eof()||!(i=Xt(e,t)))throw new O("XPST0003","Expected second operand in instance of expression");return new Tt(n,i)}Tt.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,i=this.type.occurence;if(!n)return[new Vt(!t.length)];if(!t.length)return[new Vt(i=="?"||i=="*")];if(t.length!=1)if(!(i=="+"||i=="*"))return[new Vt(false)];if(!n.test)return[new Vt(true)];var r=true;for(var o=0,a=t.length;o<a&&r;o++)r=n.test.test(t[o],e);return[new Vt(r)]};function It(e,t){this.expression=e;this.type=t}It.prototype.expression=null;It.prototype.type=null;function Nt(e,t){var n,i;if(e.eof()||!(n=Ot(e,t)))return;if(!(e.peek()=="treat"&&e.peek(1)=="as"))return n;e.next(2);if(e.eof()||!(i=Xt(e,t)))throw new O("XPST0003","Expected second operand in treat expression");return new It(n,i)}It.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,i=this.type.occurence;if(!n){if(t.length)throw new O("XPDY0050","The only value allowed for the value in 'treat as' expression is an empty sequence");return t}if(!(i=="?"||i=="*"))if(!t.length)throw new O("XPDY0050","An empty sequence is not allowed as the value in 'treat as' expression");if(!(i=="+"||i=="*"))if(t.length!=1)throw new O("XPDY0050","A sequence of more than one item is not allowed as the value in 'treat as' expression");if(!n.test)return t;for(var r=0,o=t.length;r<o;r++)if(!n.test.test(t[r],e))throw new O("XPDY0050","Required item type of value in 'treat as' expression is "+(n.test.prefix?n.test.prefix+":":"")+n.test.localName);return t};function Dt(e,t){this.expression=e;this.type=t}Dt.prototype.expression=null;Dt.prototype.type=null;function Ot(e,t){var n,i;if(e.eof()||!(n=Pt(e,t)))return;if(!(e.peek()=="castable"&&e.peek(1)=="as"))return n;e.next(2);if(e.eof()||!(i=Yt(e,t)))throw new O("XPST0003","Expected second operand in castable expression");return new Dt(n,i)}Dt.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,i=this.type.occurence;if(t.length>1)return[new Vt(false)];else if(!t.length)return[new Vt(i=="?")];try{n.cast(Yi(t,e)[0])}catch(e){if(e.code=="XPST0051")throw e;if(e.code=="XPST0017")throw new O("XPST0080","No value is castable to "+(n.prefix?n.prefix+":":"")+n.localName);return[new Vt(false)]}return[new Vt(true)]};function Et(e,t){this.expression=e;this.type=t}Et.prototype.expression=null;Et.prototype.type=null;function Pt(e,t){var n,i;if(e.eof()||!(n=ve(e,t)))return;if(!(e.peek()=="cast"&&e.peek(1)=="as"))return n;e.next(2);if(e.eof()||!(i=Yt(e,t)))throw new O("XPST0003","Expected second operand in cast expression");return new Et(n,i)}Et.prototype.evaluate=function(e){var t=this.expression.evaluate(e);ht(e,t,this.type.occurence,"'cast as' expression operand");if(!t.length)return[];return[this.type.itemType.cast(Yi(t,e)[0],e)]};function bt(e,t,n){this.prefix=e;this.localName=t;this.namespaceURI=n}bt.prototype.prefix=null;bt.prototype.localName=null;bt.prototype.namespaceURI=null;function Rt(e,t){var n=e.peek().match(Fe);if(n){if(n[1]=="*"||n[2]=="*")throw new O("XPST0003","Illegal use of wildcard in type name");e.next();return new bt(n[1]||null,n[2],n[1]?t.getURIForPrefix(n[1]):null)}}bt.prototype.test=function(e,t){var n=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,i=this.namespaceURI==x?k[this.localName]:t.staticContext.getDataType(n);if(i)return e instanceof i;throw new O("XPST0051","Unknown simple type "+(this.prefix?this.prefix+":":"")+this.localName)};bt.prototype.cast=function(e,t){var n=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,i=this.namespaceURI==x?k[this.localName]:t.staticContext.getDataType(n);if(i)return i.cast(e);throw new O("XPST0051","Unknown atomic type "+(this.prefix?this.prefix+":":"")+this.localName)};function Mt(e){this.test=e}Mt.prototype.test=null;function At(e,t){if(e.eof())return;var n;if(e.peek()=="item"&&e.peek(1)=="("){e.next(2);if(e.peek()!=")")throw new O("XPST0003","Expected ')' token in item type expression");e.next();return new Mt}if(n=Ce(e,t))return new Mt(n);if(n=Rt(e,t))return new Mt(n)}function St(e,t){this.itemType=e||null;this.occurence=t||null}St.prototype.itemType=null;St.prototype.occurence=null;function Xt(e,t){if(e.eof())return;if(e.peek()=="empty-sequence"&&e.peek(1)=="("){e.next(2);if(e.peek()!=")")throw new O("XPST0003","Expected ')' token in sequence type");e.next();return new St}var n,i;if(!e.eof()&&(n=At(e,t))){i=e.peek();if(i=="?"||i=="*"||i=="+")e.next();else i=null;return new St(n,i)}}function kt(e,t){this.itemType=e||null;this.occurence=t||null}kt.prototype.itemType=null;kt.prototype.occurence=null;function Yt(e,t){var n,i;if(!e.eof()&&(n=Rt(e,t))){i=e.peek();if(i=="?")e.next();else i=null;return new kt(n,i)}}function _t(){}_t.prototype.builtInKind=G.ANYTYPE_DT;function Ut(){}Ut.prototype=new _t;Ut.prototype.builtInKind=G.ANYSIMPLETYPE_DT;Ut.prototype.primitiveKind=null;Ut.PRIMITIVE_ANYURI="anyURI";Ut.PRIMITIVE_BASE64BINARY="base64Binary";Ut.PRIMITIVE_BOOLEAN="boolean";Ut.PRIMITIVE_DATE="date";Ut.PRIMITIVE_DATETIME="dateTime";Ut.PRIMITIVE_DECIMAL="decimal";Ut.PRIMITIVE_DOUBLE="double";Ut.PRIMITIVE_DURATION="duration";Ut.PRIMITIVE_FLOAT="float";Ut.PRIMITIVE_GDAY="gDay";Ut.PRIMITIVE_GMONTH="gMonth";Ut.PRIMITIVE_GMONTHDAY="gMonthDay";Ut.PRIMITIVE_GYEAR="gYear";Ut.PRIMITIVE_GYEARMONTH="gYearMonth";Ut.PRIMITIVE_HEXBINARY="hexBinary";Ut.PRIMITIVE_NOTATION="NOTATION";Ut.PRIMITIVE_QNAME="QName";Ut.PRIMITIVE_STRING="string";Ut.PRIMITIVE_TIME="time";function zt(){}zt.prototype=new Ut;zt.prototype.builtInKind=G.ANYATOMICTYPE_DT;zt.cast=function(e){throw new O("XPST0017","Abstract type used in constructor function xs:anyAtomicType")};function Ct(e){return e instanceof dn||e instanceof un||e instanceof on}U("anyAtomicType",zt);function Gt(e,t,n,i,r){this.scheme=e;this.authority=t;this.path=n;this.query=i;this.fragment=r}Gt.prototype=new zt;Gt.prototype.builtInKind=G.ANYURI_DT;Gt.prototype.primitiveKind=Ut.PRIMITIVE_ANYURI;Gt.prototype.scheme=null;Gt.prototype.authority=null;Gt.prototype.path=null;Gt.prototype.query=null;Gt.prototype.fragment=null;Gt.prototype.toString=function(){return(this.scheme?this.scheme+":":"")+(this.authority?"/"+"/"+this.authority:"")+(this.path?this.path:"")+(this.query?"?"+this.query:"")+(this.fragment?"#"+this.fragment:"")};var Ft=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;Gt.cast=function(e){if(e instanceof Gt)return e;if(e instanceof An||e instanceof Yn){var t;if(t=g(e).match(Ft))return new Gt(t[2],t[4],t[5],t[7],t[9]);throw new O("FORG0001")}throw new O("XPTY0004","Casting value '"+e+"' to xs:anyURI can never succeed")};U("anyURI",Gt);function qt(e){this.value=e}qt.prototype=new zt;qt.prototype.builtInKind=G.BASE64BINARY_DT;qt.prototype.primitiveKind=Ut.PRIMITIVE_BASE64BINARY;qt.prototype.value=null;qt.prototype.valueOf=function(){return this.value};qt.prototype.toString=function(){return this.value};var Kt=/^((([A-Za-z0-9+\/]\s*){4})*(([A-Za-z0-9+\/]\s*){3}[A-Za-z0-9+\/]|([A-Za-z0-9+\/]\s*){2}[AEIMQUYcgkosw048]\s*=|[A-Za-z0-9+\/]\s*[AQgw]\s*=\s*=))?$/;qt.cast=function(t){if(t instanceof qt)return t;if(t instanceof An||t instanceof Yn){var n=g(t).match(Kt);if(n)return new qt(n[0]);throw new O("FORG0001")}if(t instanceof En){var n=t.valueOf().match(/.{2}/g),i=[];for(var r=0,o=n.length;r<o;r++)i.push(e.fromCharCode(v(n[r],16)));return new qt(w(i.join("")))}throw new O("XPTY0004","Casting value '"+t+"' to xs:hexBinary can never succeed")};U("base64Binary",qt);function Vt(e){this.value=e}Vt.prototype=new zt;Vt.prototype.builtInKind=G.BOOLEAN_DT;Vt.prototype.primitiveKind=Ut.PRIMITIVE_BOOLEAN;Vt.prototype.value=null;Vt.prototype.valueOf=function(){return this.value};Vt.prototype.toString=function(){return e(this.value)};var Bt=/^(0|1|true|false)$/;Vt.cast=function(e){if(e instanceof Vt)return e;if(e instanceof An||e instanceof Yn){var t;if(t=g(e).match(Bt))return new Vt(t[1]=="1"||t[1]=="true");throw new O("FORG0001")}if(Ct(e))return new Vt(e!=0);throw new O("XPTY0004","Casting value '"+e+"' to xs:boolean can never succeed")};U("boolean",Vt);function Lt(e,t,n,i,r){this.year=e;this.month=t;this.day=n;this.timezone=i;this.negative=r}Lt.prototype=new zt;Lt.prototype.builtInKind=G.DATE_DT;Lt.prototype.primitiveKind=Ut.PRIMITIVE_DATE;Lt.prototype.year=null;Lt.prototype.month=null;Lt.prototype.day=null;Lt.prototype.timezone=null;Lt.prototype.negative=null;Lt.prototype.toString=function(){return tn(this)+en(this)};var $t=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;Lt.cast=function(e){if(e instanceof Lt)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match($t);if(t){var n=+t[2],i=+t[3],r=+t[4];if(r-1<Zt(n,i))return new Lt(n,i,r,t[5]?t[5]=="Z"?0:(t[6]=="-"?-1:1)*(t[7]*60+t[8]*1):null,t[1]=="-");throw new O("FORG0001","Invalid date '"+e+"' (Non-existent date)")}throw new O("FORG0001")}if(e instanceof jt)return new Lt(e.year,e.month,e.day,e.timezone,e.negative);throw new O("XPTY0004","Casting value '"+e+"' to xs:date can never succeed")};var Ht=[31,28,31,30,31,30,31,31,30,31,30,31];function Zt(e,t){return t==2&&(e%400==0||e%100!=0&&e%4==0)?29:Ht[t-1]}function Qt(e,t){if(!t){var n=Zt(e.year,e.month);if(e.day>n){while(e.day>n){e.month+=1;if(e.month>12){e.year+=1;if(e.year==0)e.year=1;e.month=1}e.day-=n;n=Zt(e.year,e.month)}}else if(e.day<1){while(e.day<1){e.month-=1;if(e.month<1){e.year-=1;if(e.year==0)e.year=-1;e.month=12}n=Zt(e.year,e.month);e.day+=n}}}if(e.month>12){e.year+=~~(e.month/12);if(e.year==0)e.year=1;e.month=e.month%12}else if(e.month<1){e.year+=~~(e.month/12)-1;if(e.year==0)e.year=-1;e.month=e.month%12+12}return e}U("date",Lt);function jt(e,t,n,i,r,o,a,u){this.year=e;this.month=t;this.day=n;this.hours=i;this.minutes=r;this.seconds=o;this.timezone=a;this.negative=u}jt.prototype=new zt;jt.prototype.builtInKind=G.DATETIME_DT;jt.prototype.primitiveKind=Ut.PRIMITIVE_DATETIME;jt.prototype.year=null;jt.prototype.month=null;jt.prototype.day=null;jt.prototype.hours=null;jt.prototype.minutes=null;jt.prototype.seconds=null;jt.prototype.timezone=null;jt.prototype.negative=null;jt.prototype.toString=function(){return tn(this)+"T"+nn(this)+en(this)};var Jt=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])T(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;jt.cast=function(e){if(e instanceof jt)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(Jt);if(t){var i=+t[2],r=+t[3],o=+t[4],a=!!t[10];if(o-1<Zt(i,r))return rn(new jt(i,r,o,a?24:+t[6],a?0:+t[7],n((a?0:t[8])+"."+(a?0:t[9]||0)),t[12]?t[12]=="Z"?0:(t[13]=="-"?-1:1)*(t[14]*60+t[15]*1):null,t[1]=="-"));throw new O("FORG0001","Invalid date '"+e+"' (Non-existent date)")}throw new O("FORG0001")}if(e instanceof Lt)return new jt(e.year,e.month,e.day,0,0,0,e.timezone,e.negative);throw new O("XPTY0004","Casting value '"+e+"' to xs:dateTime can never succeed")};function Wt(t,n){var i=e(t);if(arguments.length<2)n=2;return(i.length<n+1?new r(n+1-i.length).join("0"):"")+i}function en(e){var t=e.timezone;return t==null?"":t?(t>0?"+":"-")+Wt(s.abs(~~(t/60)))+":"+Wt(s.abs(t%60)):"Z"}function tn(e){return(e.negative?"-":"")+Wt(e.year,4)+"-"+Wt(e.month)+"-"+Wt(e.day)}function nn(t){var n=e(t.seconds).split(".");return Wt(t.hours)+":"+Wt(t.minutes)+":"+Wt(n[0])+(n.length>1?"."+n[1]:"")}function rn(e){return Qt(kn(e))}U("dateTime",jt);function on(e){this.value=e}on.prototype=new zt;on.prototype.builtInKind=G.DECIMAL_DT;on.prototype.primitiveKind=Ut.PRIMITIVE_DECIMAL;on.prototype.value=null;on.prototype.valueOf=function(){return this.value};on.prototype.toString=function(){return e(this.value)};var an=/^[+\-]?((\d+(\.\d*)?)|(\.\d+))$/;on.cast=function(e){if(e instanceof on)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(an);if(t)return new on(+e);throw new O("FORG0001")}if(e instanceof Vt)return new on(e*1);if(Ct(e)){if(p(e)||!h(e))throw new O("FOCA0002","Cannot convert '"+e+"' to xs:decimal");return new on(+e)}throw new O("XPTY0004","Casting value '"+e+"' to xs:decimal can never succeed")};U("decimal",on);function un(e){this.value=e}un.prototype=new zt;un.prototype.builtInKind=G.DOUBLE_DT;un.prototype.primitiveKind=Ut.PRIMITIVE_DOUBLE;un.prototype.value=null;un.prototype.valueOf=function(){return this.value};un.prototype.toString=function(){return e(this.value)};var sn=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;un.cast=function(e){if(e instanceof un)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(sn);if(t)return new un(t[7]?+t[7].replace("INF","Infinity"):+e);throw new O("FORG0001")}if(e instanceof Vt)return new un(e*1);if(Ct(e))return new un(e.value);throw new O("XPTY0004","Casting value '"+e+"' to xs:double can never succeed")};U("double",un);function fn(e,t,n,i,r,o,a){this.year=e;this.month=t;this.day=n;this.hours=i;this.minutes=r;this.seconds=o;this.negative=a}fn.prototype=new zt;fn.prototype.builtInKind=G.DURATION_DT;fn.prototype.primitiveKind=Ut.PRIMITIVE_DURATION;fn.prototype.year=null;fn.prototype.month=null;fn.prototype.day=null;fn.prototype.hours=null;fn.prototype.minutes=null;fn.prototype.seconds=null;fn.prototype.negative=null;fn.prototype.toString=function(){return(this.negative?"-":"")+"P"+(cn(this)+pn(this)||"T0S")};var ln=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;fn.cast=function(e){if(e instanceof _n)return new fn(e.year,e.month,0,0,0,0,e.negative);if(e instanceof Cn)return new fn(0,0,e.day,e.hours,e.minutes,e.seconds,e.negative);if(e instanceof fn)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(ln);if(t)return hn(new fn(+t[2]||0,+t[3]||0,+t[4]||0,+t[5]||0,+t[6]||0,+t[7]||0,t[1]=="-"));throw new O("FORG0001")}throw new O("XPTY0004","Casting value '"+e+"' to xs:duration can never succeed")};function cn(e){return(e.year?e.year+"Y":"")+(e.month?e.month+"M":"")}function pn(e){return(e.day?e.day+"D":"")+(e.hours||e.minutes||e.seconds?"T"+(e.hours?e.hours+"H":"")+(e.minutes?e.minutes+"M":"")+(e.seconds?e.seconds+"S":""):"")}function hn(e){return zn(Fn(e))}U("duration",fn);function dn(e){this.value=e}dn.prototype=new zt;dn.prototype.builtInKind=G.FLOAT_DT;dn.prototype.primitiveKind=Ut.PRIMITIVE_FLOAT;dn.prototype.value=null;dn.prototype.valueOf=function(){return this.value};dn.prototype.toString=function(){return e(this.value)};var mn=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;dn.cast=function(e){if(e instanceof dn)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(mn);if(t)return new dn(t[7]?+t[7].replace("INF","Infinity"):+e);throw new O("FORG0001")}if(e instanceof Vt)return new dn(e*1);if(Ct(e))return new dn(e.value);throw new O("XPTY0004","Casting value '"+e+"' to xs:float can never succeed")};U("float",dn);function wn(e,t){this.day=e;this.timezone=t}wn.prototype=new zt;wn.prototype.builtInKind=G.GDAY_DT;wn.prototype.primitiveKind=Ut.PRIMITIVE_GDAY;wn.prototype.day=null;wn.prototype.timezone=null;wn.prototype.toString=function(){return"-"+"-"+"-"+Wt(this.day)+en(this)};var yn=/^---(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;wn.cast=function(e){if(e instanceof wn)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(yn);if(t){var n=+t[1];return new wn(n,t[2]?t[2]=="Z"?0:(t[3]=="-"?-1:1)*(t[4]*60+t[5]*1):null)}throw new O("FORG0001")}if(e instanceof Lt||e instanceof jt)return new wn(e.day,e.timezone);throw new O("XPTY0004","Casting value '"+e+"' to xs:gDay can never succeed")};U("gDay",wn);function vn(e,t){this.month=e;this.timezone=t}vn.prototype=new zt;vn.prototype.builtInKind=G.GMONTH_DT;vn.prototype.primitiveKind=Ut.PRIMITIVE_GMONTH;vn.prototype.month=null;vn.prototype.timezone=null;vn.prototype.toString=function(){return"-"+"-"+Wt(this.month)+en(this)};var gn=/^--(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;vn.cast=function(e){if(e instanceof vn)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(gn);if(t){var n=+t[1];return new vn(n,t[2]?t[2]=="Z"?0:(t[3]=="-"?-1:1)*(t[4]*60+t[5]*1):null)}throw new O("FORG0001")}if(e instanceof Lt||e instanceof jt)return new vn(e.month,e.timezone);throw new O("XPTY0004","Casting value '"+e+"' to xs:gMonth can never succeed")};U("gMonth",vn);function Tn(e,t,n){this.month=e;this.day=t;this.timezone=n}Tn.prototype=new zt;Tn.prototype.builtInKind=G.GMONTHDAY_DT;Tn.prototype.primitiveKind=Ut.PRIMITIVE_GMONTHDAY;Tn.prototype.month=null;Tn.prototype.day=null;Tn.prototype.timezone=null;Tn.prototype.toString=function(){return"-"+"-"+Wt(this.month)+"-"+Wt(this.day)+en(this)};var xn=/^--(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;Tn.cast=function(e){if(e instanceof Tn)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(xn);if(t){var n=+t[1],i=+t[2];if(i-1<Zt(1976,n))return new Tn(n,i,t[3]?t[3]=="Z"?0:(t[4]=="-"?-1:1)*(t[5]*60+t[6]*1):null);throw new O("FORG0001","Invalid date '"+e+"' (Non-existent date)")}throw new O("FORG0001")}if(e instanceof Lt||e instanceof jt)return new Tn(e.month,e.day,e.timezone);throw new O("XPTY0004","Casting value '"+e+"' to xs:gMonthDay can never succeed")};U("gMonthDay",Tn);function In(e,t){this.year=e;this.timezone=t}In.prototype=new zt;In.prototype.builtInKind=G.GYEAR_DT;In.prototype.primitiveKind=Ut.PRIMITIVE_GYEAR;In.prototype.year=null;In.prototype.timezone=null;In.prototype.toString=function(){return Wt(this.year)+en(this)};var Nn=/^-?([1-9]\d\d\d+|0\d\d\d)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;In.cast=function(e){if(e instanceof In)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(Nn);if(t){var n=+t[1];return new In(n,t[2]?t[2]=="Z"?0:(t[3]=="-"?-1:1)*(t[4]*60+t[5]*1):null)}throw new O("FORG0001")}if(e instanceof Lt||e instanceof jt)return new In(e.year,e.timezone);throw new O("XPTY0004","Casting value '"+e+"' to xs:gYear can never succeed")};U("gYear",In);function Dn(e,t,n){this.year=e;this.month=t;this.timezone=n}Dn.prototype=new zt;Dn.prototype.builtInKind=G.GYEARMONTH_DT;Dn.prototype.primitiveKind=Ut.PRIMITIVE_GYEARMONTH;Dn.prototype.year=null;Dn.prototype.month=null;Dn.prototype.timezone=null;Dn.prototype.toString=function(){return Wt(this.year)+"-"+Wt(this.month)+en(this)};var On=/^-?([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;Dn.cast=function(e){if(e instanceof Dn)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(On);if(t){var n=+t[1],i=+t[2];return new Dn(n,i,t[3]?t[3]=="Z"?0:(t[4]=="-"?-1:1)*(t[5]*60+t[6]*1):null)}throw new O("FORG0001")}if(e instanceof Lt||e instanceof jt)return new Dn(e.year,e.month,e.timezone);throw new O("XPTY0004","Casting value '"+e+"' to xs:gYearMonth can never succeed")};U("gYearMonth",Dn);function En(e){this.value=e}En.prototype=new zt;En.prototype.builtInKind=G.HEXBINARY_DT;En.prototype.primitiveKind=Ut.PRIMITIVE_HEXBINARY;En.prototype.value=null;En.prototype.valueOf=function(){return this.value};En.prototype.toString=function(){return this.value};var Pn=/^([0-9a-fA-F]{2})*$/;En.cast=function(e){if(e instanceof En)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(Pn);if(t)return new En(t[0].toUpperCase());throw new O("FORG0001")}if(e instanceof qt){var n=y(e.valueOf()),i=[];for(var o=0,a=n.length,u;o<a;o++){u=n.charCodeAt(o).toString(16);i.push(new r(3-u.length).join("0")+u)}return new En(i.join(""))}throw new O("XPTY0004","Casting value '"+e+"' to xs:hexBinary can never succeed")};U("hexBinary",En);function bn(){}bn.prototype=new zt;bn.prototype.builtInKind=G.NOTATION_DT;bn.prototype.primitiveKind=Ut.PRIMITIVE_NOTATION;bn.cast=function(e){throw new O("XPST0017","Abstract type used in constructor function xs:NOTATION")};U("NOTATION",bn);function Rn(e,t,n){this.prefix=e;this.localName=t;this.namespaceURI=n}Rn.prototype=new zt;Rn.prototype.builtInKind=G.QNAME_DT;Rn.prototype.primitiveKind=Ut.PRIMITIVE_QNAME;Rn.prototype.prefix=null;Rn.prototype.localName=null;Rn.prototype.namespaceURI=null;Rn.prototype.toString=function(){return(this.prefix?this.prefix+":":"")+this.localName};var Mn=/^(?:(?![0-9-])([\w-]+)\:)?(?![0-9-])([\w-]+)$/;Rn.cast=function(e){if(e instanceof Rn)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(Mn);if(t)return new Rn(t[1]||null,t[2],null);throw new O("FORG0001")}throw new O("XPTY0004","Casting value '"+e+"' to xs:QName can never succeed")};U("QName",Rn);function An(e){this.value=e}An.prototype=new zt;An.prototype.value=null;An.prototype.builtInKind=G.STRING_DT;An.prototype.primitiveKind=Ut.PRIMITIVE_STRING;An.prototype.valueOf=function(){return this.value};An.prototype.toString=function(){return this.value};An.cast=function(t){return new An(e(t));throw new O("XPTY0004","Casting value '"+t+"' to xs:string can never succeed")};U("string",An);function Sn(e,t,n,i){this.hours=e;this.minutes=t;this.seconds=n;this.timezone=i}Sn.prototype=new zt;Sn.prototype.builtInKind=G.TIME_DT;Sn.prototype.primitiveKind=Ut.PRIMITIVE_TIME;Sn.prototype.hours=null;Sn.prototype.minutes=null;Sn.prototype.seconds=null;Sn.prototype.timezone=null;Sn.prototype.toString=function(){return nn(this)+en(this)};var Xn=/^(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;Sn.cast=function(e){if(e instanceof Sn)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(Xn);if(t){var i=!!t[6];return new Sn(i?0:+t[2],i?0:+t[3],n((i?0:t[4])+"."+(i?0:t[5]||0)),t[8]?t[8]=="Z"?0:(t[9]=="-"?-1:1)*(t[10]*60+t[11]*1):null)}throw new O("FORG0001")}if(e instanceof jt)return new Sn(e.hours,e.minutes,e.seconds,e.timezone);throw new O("XPTY0004","Casting value '"+e+"' to xs:time can never succeed")};function kn(e){if(e.seconds>=60||e.seconds<0){e.minutes+=~~(e.seconds/60)-(e.seconds<0&&e.seconds%60?1:0);e.seconds=e.seconds%60+(e.seconds<0&&e.seconds%60?60:0)}if(e.minutes>=60||e.minutes<0){e.hours+=~~(e.minutes/60)-(e.minutes<0&&e.minutes%60?1:0);e.minutes=e.minutes%60+(e.minutes<0&&e.minutes%60?60:0)}if(e.hours>=24||e.hours<0){if(e instanceof jt)e.day+=~~(e.hours/24)-(e.hours<0&&e.hours%24?1:0);e.hours=e.hours%24+(e.hours<0&&e.hours%24?24:0)}return e}U("time",Sn);function Yn(e){this.value=e}Yn.prototype=new zt;Yn.prototype.builtInKind=G.XT_UNTYPEDATOMIC_DT;Yn.prototype.toString=function(){return e(this.value)};Yn.cast=function(t){if(t instanceof Yn)return t;return new Yn(e(t));throw new O("XPTY0004","Casting value '"+t+"' to xs:untypedAtomic can never succeed")};U("untypedAtomic",Yn);function _n(e,t,n){fn.call(this,e,t,0,0,0,0,n)}_n.prototype=new fn;_n.prototype.builtInKind=G.XT_YEARMONTHDURATION_DT;_n.prototype.toString=function(){return(this.negative?"-":"")+"P"+(cn(this)||"0M")};var Un=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?$/;_n.cast=function(e){if(e instanceof _n)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(Un);if(t)return zn(new _n(+t[2]||0,+t[3]||0,t[1]=="-"));throw new O("FORG0001")}if(e instanceof Cn)return new _n(0,0);if(e instanceof fn)return new _n(e.year,e.month,e.negative);throw new O("XPTY0004","Casting value '"+e+"' to xs:yearMonthDuration can never succeed")};function zn(e){if(e.month>=12){e.year+=~~(e.month/12);e.month%=12}return e}U("yearMonthDuration",_n);function Cn(e,t,n,i,r){fn.call(this,0,0,e,t,n,i,r)}Cn.prototype=new fn;Cn.prototype.builtInKind=G.DAYTIMEDURATION_DT;Cn.prototype.toString=function(){return(this.negative?"-":"")+"P"+(pn(this)||"T0S")};var Gn=/^(-)?P(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;Cn.cast=function(e){if(e instanceof Cn)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(Gn);if(t)return Fn(new Cn(+t[2]||0,+t[3]||0,+t[4]||0,+t[5]||0,t[1]=="-"));throw new O("FORG0001")}if(e instanceof _n)return new Cn(0,0,0,0);if(e instanceof fn)return new Cn(e.day,e.hours,e.minutes,e.seconds,e.negative);throw new O("XPTY0004","Casting value '"+e+"' to xs:dayTimeDuration can never succeed")};function Fn(e){if(e.seconds>=60){e.minutes+=~~(e.seconds/60);e.seconds%=60}if(e.minutes>=60){e.hours+=~~(e.minutes/60);e.minutes%=60}if(e.hours>=24){e.day+=~~(e.hours/24);e.hours%=24}return e}U("dayTimeDuration",Cn);function qn(e){this.value=e}qn.prototype=new on;qn.prototype.builtInKind=G.INTEGER_DT;var Kn=/^[-+]?[0-9]+$/;qn.cast=function(e){if(e instanceof qn)return e;if(e instanceof An||e instanceof Yn){var t=g(e).match(Kn);if(t)return new qn(~~e);throw new O("FORG0001")}if(e instanceof Vt)return new qn(e*1);if(Ct(e)){if(p(e)||!h(e))throw new O("FOCA0002","Cannot convert '"+e+"' to xs:integer");return new qn(~~e)}throw new O("XPTY0004","Casting value '"+e+"' to xs:integer can never succeed");
};U("integer",qn);function Vn(e){this.value=e}Vn.prototype=new qn;Vn.prototype.builtInKind=G.NONPOSITIVEINTEGER_DT;Vn.cast=function(e){return new Vn(n(e))};U("nonPositiveInteger",Vn);function Bn(e){this.value=e}Bn.prototype=new Vn;Bn.prototype.builtInKind=G.NEGATIVEINTEGER_DT;Bn.cast=function(e){return new Bn(n(e))};U("negativeInteger",Bn);function Ln(e){this.value=e}Ln.prototype=new qn;Ln.prototype.builtInKind=G.LONG_DT;Ln.cast=function(e){return new Ln(n(e))};U("long",Ln);function $n(e){this.value=e}$n.prototype=new Ln;$n.prototype.builtInKind=G.INT_DT;$n.cast=function(e){return new $n(n(e))};U("int",$n);function Hn(e){this.value=e}Hn.prototype=new $n;Hn.prototype.builtInKind=G.SHORT_DT;Hn.cast=function(e){return new Hn(n(e))};U("short",Hn);function Zn(e){this.value=e}Zn.prototype=new Hn;Zn.prototype.builtInKind=G.BYTE_DT;Zn.cast=function(e){return new Zn(n(e))};U("byte",Zn);function Qn(e){this.value=e}Qn.prototype=new qn;Qn.prototype.builtInKind=G.NONNEGATIVEINTEGER_DT;Qn.cast=function(e){return new Qn(n(e))};U("nonNegativeInteger",Qn);function jn(e){this.value=e}jn.prototype=new Qn;jn.prototype.builtInKind=G.POSITIVEINTEGER_DT;jn.cast=function(e){return new jn(n(e))};U("positiveInteger",jn);function Jn(e){this.value=e}Jn.prototype=new Qn;Jn.prototype.builtInKind=G.UNSIGNEDLONG_DT;Jn.cast=function(e){return new Jn(n(e))};U("unsignedLong",Jn);function Wn(e){this.value=e}Wn.prototype=new Qn;Wn.prototype.builtInKind=G.UNSIGNEDINT_DT;Wn.cast=function(e){return new Wn(n(e))};U("unsignedInt",Wn);function ei(e){this.value=e}ei.prototype=new Wn;ei.prototype.builtInKind=G.UNSIGNEDSHORT_DT;ei.cast=function(e){return new ei(n(e))};U("unsignedShort",ei);function ti(e){this.value=e}ti.prototype=new ei;ti.prototype.builtInKind=G.UNSIGNEDBYTE_DT;ti.cast=function(e){return new ti(n(e))};U("unsignedByte",ti);function ni(e){this.value=e}ni.prototype=new An;ni.prototype.builtInKind=G.NORMALIZEDSTRING_DT;ni.cast=function(t){return new ni(e(t))};U("normalizedString",ni);function ii(e){this.value=e}ii.prototype=new ni;ii.prototype.builtInKind=G.TOKEN_DT;ii.cast=function(t){return new ii(e(t))};U("token",ii);function ri(e){this.value=e}ri.prototype=new ii;ri.prototype.builtInKind=G.NAME_DT;ri.cast=function(t){return new ri(e(t))};U("Name",ri);function oi(e){this.value=e}oi.prototype=new ri;oi.prototype.builtInKind=G.NCNAME_DT;oi.cast=function(t){return new oi(e(t))};U("NCName",oi);function ai(e){this.value=e}ai.prototype=new oi;ai.prototype.builtInKind=G.ENTITY_DT;ai.cast=function(t){return new ai(e(t))};U("ENTITY",ai);function ui(e){this.value=e}ui.prototype=new oi;ui.prototype.builtInKind=G.ID_DT;ui.cast=function(t){return new ui(e(t))};U("ID",ui);function si(e){this.value=e}si.prototype=new ii;si.prototype.builtInKind=G.LANGUAGE_DT;si.cast=function(t){return new si(e(t))};U("language",si);function fi(e){this.value=e}fi.prototype=new ii;fi.prototype.builtInKind=G.NMTOKEN_DT;fi.cast=function(t){return new fi(e(t))};U("NMTOKEN",fi);function li(){}function ci(){}ci.prototype=new li;function pi(){}pi.prototype=new ci;function hi(){}hi.prototype=new ci;function di(){}di.prototype=new ci;function mi(){}mi.prototype=new ci;function wi(){}wi.prototype=new ci;function yi(){}yi.prototype=new ci;Y["hexBinary-equal"]=function(e,t){return new Vt(e.valueOf()==t.valueOf())};Y["base64Binary-equal"]=function(e,t){return new Vt(e.valueOf()==t.valueOf())};Y["boolean-equal"]=function(e,t){return new Vt(e.valueOf()==t.valueOf())};Y["boolean-less-than"]=function(e,t){return new Vt(e.valueOf()<t.valueOf())};Y["boolean-greater-than"]=function(e,t){return new Vt(e.valueOf()>t.valueOf())};Y["yearMonthDuration-less-than"]=function(e,t){return new Vt(Oi(e)<Oi(t))};Y["yearMonthDuration-greater-than"]=function(e,t){return new Vt(Oi(e)>Oi(t))};Y["dayTimeDuration-less-than"]=function(e,t){return new Vt(Ni(e)<Ni(t))};Y["dayTimeDuration-greater-than"]=function(e,t){return new Vt(Ni(e)>Ni(t))};Y["duration-equal"]=function(e,t){return new Vt(e.negative==t.negative&&Oi(e)==Oi(t)&&Ni(e)==Ni(t))};Y["dateTime-equal"]=function(e,t){return Ti(e,t,"eq")};Y["dateTime-less-than"]=function(e,t){return Ti(e,t,"lt")};Y["dateTime-greater-than"]=function(e,t){return Ti(e,t,"gt")};Y["date-equal"]=function(e,t){return gi(e,t,"eq")};Y["date-less-than"]=function(e,t){return gi(e,t,"lt")};Y["date-greater-than"]=function(e,t){return gi(e,t,"gt")};Y["time-equal"]=function(e,t){return vi(e,t,"eq")};Y["time-less-than"]=function(e,t){return vi(e,t,"lt")};Y["time-greater-than"]=function(e,t){return vi(e,t,"gt")};Y["gYearMonth-equal"]=function(e,t){return Ti(new jt(e.year,e.month,Zt(e.year,e.month),0,0,0,e.timezone==null?this.timezone:e.timezone),new jt(t.year,t.month,Zt(t.year,t.month),0,0,0,t.timezone==null?this.timezone:t.timezone),"eq")};Y["gYear-equal"]=function(e,t){return Ti(new jt(e.year,1,1,0,0,0,e.timezone==null?this.timezone:e.timezone),new jt(t.year,1,1,0,0,0,t.timezone==null?this.timezone:t.timezone),"eq")};Y["gMonthDay-equal"]=function(e,t){return Ti(new jt(1972,e.month,e.day,0,0,0,e.timezone==null?this.timezone:e.timezone),new jt(1972,t.month,t.day,0,0,0,t.timezone==null?this.timezone:t.timezone),"eq")};Y["gMonth-equal"]=function(e,t){return Ti(new jt(1972,e.month,Zt(1972,t.month),0,0,0,e.timezone==null?this.timezone:e.timezone),new jt(1972,t.month,Zt(1972,t.month),0,0,0,t.timezone==null?this.timezone:t.timezone),"eq")};Y["gDay-equal"]=function(e,t){return Ti(new jt(1972,12,e.day,0,0,0,e.timezone==null?this.timezone:e.timezone),new jt(1972,12,t.day,0,0,0,t.timezone==null?this.timezone:t.timezone),"eq")};Y["add-yearMonthDurations"]=function(e,t){return Ei(Oi(e)+Oi(t))};Y["subtract-yearMonthDurations"]=function(e,t){return Ei(Oi(e)-Oi(t))};Y["multiply-yearMonthDuration"]=function(e,t){return Ei(Oi(e)*t)};Y["divide-yearMonthDuration"]=function(e,t){return Ei(Oi(e)/t)};Y["divide-yearMonthDuration-by-yearMonthDuration"]=function(e,t){return new on(Oi(e)/Oi(t))};Y["add-dayTimeDurations"]=function(e,t){return Di(Ni(e)+Ni(t))};Y["subtract-dayTimeDurations"]=function(e,t){return Di(Ni(e)-Ni(t))};Y["multiply-dayTimeDuration"]=function(e,t){return Di(Ni(e)*t)};Y["divide-dayTimeDuration"]=function(e,t){return Di(Ni(e)/t)};Y["divide-dayTimeDuration-by-dayTimeDuration"]=function(e,t){return new on(Ni(e)/Ni(t))};Y["subtract-dateTimes"]=function(e,t){return Di(bi(e)-bi(t))};Y["subtract-dates"]=function(e,t){return Di(bi(e)-bi(t))};Y["subtract-times"]=function(e,t){return Di(Pi(e)-Pi(t))};Y["add-yearMonthDuration-to-dateTime"]=function(e,t){return xi(e,t,"+")};Y["add-dayTimeDuration-to-dateTime"]=function(e,t){return Ii(e,t,"+")};Y["subtract-yearMonthDuration-from-dateTime"]=function(e,t){return xi(e,t,"-")};Y["subtract-dayTimeDuration-from-dateTime"]=function(e,t){return Ii(e,t,"-")};Y["add-yearMonthDuration-to-date"]=function(e,t){return xi(e,t,"+")};Y["add-dayTimeDuration-to-date"]=function(e,t){return Ii(e,t,"+")};Y["subtract-yearMonthDuration-from-date"]=function(e,t){return xi(e,t,"-")};Y["subtract-dayTimeDuration-from-date"]=function(e,t){return Ii(e,t,"-")};Y["add-dayTimeDuration-to-time"]=function(e,t){var n=new Sn(e.hours,e.minutes,e.seconds,e.timezone);n.hours+=t.hours;n.minutes+=t.minutes;n.seconds+=t.seconds;return kn(n)};Y["subtract-dayTimeDuration-from-time"]=function(e,t){var n=new Sn(e.hours,e.minutes,e.seconds,e.timezone);n.hours-=t.hours;n.minutes-=t.minutes;n.seconds-=t.seconds;return kn(n)};function vi(e,t,n){var i=Pi(e),r=Pi(t);return new Vt(n=="lt"?i<r:n=="gt"?i>r:i==r)}function gi(e,t,n){return Ti(jt.cast(e),jt.cast(t),n)}function Ti(e,t,n){var i=new Cn(0,0,0,0),r=Xi(e,i).toString(),o=Xi(t,i).toString();return new Vt(n=="lt"?r<o:n=="gt"?r>o:r==o)}function xi(e,t,n){var i;if(e instanceof Lt)i=new Lt(e.year,e.month,e.day,e.timezone,e.negative);else if(e instanceof jt)i=new jt(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative);i.year=i.year+t.year*(n=="-"?-1:1);i.month=i.month+t.month*(n=="-"?-1:1);Qt(i,true);var r=Zt(i.year,i.month);if(i.day>r)i.day=r;return i}function Ii(e,t,n){var i;if(e instanceof Lt){var r=(t.hours*60+t.minutes)*60+t.seconds;i=new Lt(e.year,e.month,e.day,e.timezone,e.negative);i.day=i.day+t.day*(n=="-"?-1:1)-1*(r&&n=="-");Qt(i)}else if(e instanceof jt){i=new jt(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative);i.seconds=i.seconds+t.seconds*(n=="-"?-1:1);i.minutes=i.minutes+t.minutes*(n=="-"?-1:1);i.hours=i.hours+t.hours*(n=="-"?-1:1);i.day=i.day+t.day*(n=="-"?-1:1);rn(i)}return i}function Ni(e){return(((e.day*24+e.hours)*60+e.minutes)*60+e.seconds)*(e.negative?-1:1)}function Di(e){var t=(e=s.round(e))<0,n=~~((e=s.abs(e))/86400),i=~~((e-=n*3600*24)/3600),r=~~((e-=i*3600)/60),o=e-=r*60;return new Cn(n,i,r,o,t)}function Oi(e){return(e.year*12+e.month)*(e.negative?-1:1)}function Ei(e){var t=(e=s.round(e))<0,n=~~((e=s.abs(e))/12),i=e-=n*12;return new _n(n,i,t)}function Pi(e){return e.seconds+(e.minutes-(e.timezone!=null?e.timezone%60:0)+(e.hours-(e.timezone!=null?~~(e.timezone/60):0))*60)*60}function bi(e){var t=new a((e.negative?-1:1)*e.year,e.month,e.day,0,0,0,0);if(e instanceof jt){t.setHours(e.hours);t.setMinutes(e.minutes);t.setSeconds(e.seconds)}if(e.timezone!=null)t.setMinutes(t.getMinutes()-e.timezone);return t.getTime()/1e3}Y["is-same-node"]=function(e,t){return new Vt(this.DOMAdapter.isSameNode(e,t))};Y["node-before"]=function(e,t){return new Vt(!!(this.DOMAdapter.compareDocumentPosition(e,t)&4))};Y["node-after"]=function(e,t){return new Vt(!!(this.DOMAdapter.compareDocumentPosition(e,t)&2))};function Ri(t,n){if(p(t)||s.abs(t)==m||p(n)||s.abs(n)==m)return 0;var i=e(t).match(Je),r=e(n).match(Je),o=s.max(1,(i[2]||i[3]||"").length+(i[5]||0)*(i[4]=="+"?-1:1),(r[2]||r[3]||"").length+(r[5]||0)*(r[4]=="+"?-1:1));return o+(o%2?0:1)}Y["numeric-add"]=function(e,t){var n=e.valueOf(),i=t.valueOf(),r=s.pow(10,Ri(n,i));return Mi(e,t,(n*r+i*r)/r)};Y["numeric-subtract"]=function(e,t){var n=e.valueOf(),i=t.valueOf(),r=s.pow(10,Ri(n,i));return Mi(e,t,(n*r-i*r)/r)};Y["numeric-multiply"]=function(e,t){var n=e.valueOf(),i=t.valueOf(),r=s.pow(10,Ri(n,i));return Mi(e,t,n*r*(i*r)/(r*r))};Y["numeric-divide"]=function(e,t){var n=e.valueOf(),i=t.valueOf(),r=s.pow(10,Ri(n,i));return Mi(e,t,e*r/(t*r))};Y["numeric-integer-divide"]=function(e,t){return new qn(~~(e/t))};Y["numeric-mod"]=function(e,t){var n=e.valueOf(),i=t.valueOf(),r=s.pow(10,Ri(n,i));return Mi(e,t,n*r%(i*r)/r)};Y["numeric-unary-plus"]=function(e){return e};Y["numeric-unary-minus"]=function(e){e.value*=-1;return e};Y["numeric-equal"]=function(e,t){return new Vt(e.valueOf()==t.valueOf())};Y["numeric-less-than"]=function(e,t){return new Vt(e.valueOf()<t.valueOf())};Y["numeric-greater-than"]=function(e,t){return new Vt(e.valueOf()>t.valueOf())};function Mi(e,t,n){return new(e instanceof qn&&t instanceof qn&&n==s.round(n)?qn:on)(n)}Y["QName-equal"]=function(e,t){return new Vt(e.localName==t.localName&&e.namespaceURI==t.namespaceURI)};Y["concatenate"]=function(e,t){return e.concat(t)};Y["union"]=function(e,t){var n=[];for(var i=0,r=e.length,o;i<r;i++){if(!this.DOMAdapter.isNode(o=e[i]))throw new O("XPTY0004","Required item type of first operand of 'union' is node()");if(T(n,o)==-1)n.push(o)}for(var i=0,r=t.length,o;i<r;i++){if(!this.DOMAdapter.isNode(o=t[i]))throw new O("XPTY0004","Required item type of second operand of 'union' is node()");if(T(n,o)==-1)n.push(o)}return _i(n,this)};Y["intersect"]=function(e,t){var n=[];for(var i=0,r=e.length,o,a;i<r;i++){if(!this.DOMAdapter.isNode(o=e[i]))throw new O("XPTY0004","Required item type of second operand of 'intersect' is node()");a=false;for(var u=0,s=t.length;u<s&&!a;u++){if(!this.DOMAdapter.isNode(t[u]))throw new O("XPTY0004","Required item type of first operand of 'intersect' is node()");a=this.DOMAdapter.isSameNode(t[u],o)}if(a&&T(n,o)==-1)n.push(o)}return _i(n,this)};Y["except"]=function(e,t){var n=[];for(var i=0,r=e.length,o,a;i<r;i++){if(!this.DOMAdapter.isNode(o=e[i]))throw new O("XPTY0004","Required item type of second operand of 'except' is node()");a=false;for(var u=0,s=t.length;u<s&&!a;u++){if(!this.DOMAdapter.isNode(t[u]))throw new O("XPTY0004","Required item type of first operand of 'except' is node()");a=this.DOMAdapter.isSameNode(t[u],o)}if(!a&&T(n,o)==-1)n.push(o)}return _i(n,this)};Y["to"]=function(e,t){var n=[];for(var i=e.valueOf(),r=t.valueOf();i<=r;i++)n.push(new qn(i));return n};_("node-name",[[ci,"?"]],function(e){if(e!=null){var t=this.DOMAdapter.getProperty;switch(t(e,"nodeType")){case 1:case 2:return new Rn(t(e,"prefix"),t(e,"localName"),t(e,"namespaceURI"));case 5:throw"Not implemented";case 6:throw"Not implemented";case 7:return new Rn(null,t(e,"target"),null);case 10:return new Rn(null,t(e,"name"),null)}}return null});_("nilled",[[ci,"?"]],function(e){if(e!=null){if(this.DOMAdapter.getProperty(e,"nodeType")==1)return new Vt(false)}return null});_("string",[[li,"?",true]],function(e){if(!arguments.length){if(!this.item)throw new O("XPDY0002");e=this.item}return e==null?new An(""):An.cast(Yi([e],this)[0])});_("data",[[li,"*"]],function(e){return Yi(e,this)});_("base-uri",[[ci,"?",true]],function(e){if(!arguments.length){if(!this.DOMAdapter.isNode(this.item))throw new O("XPTY0004","base-uri() function called when the context item is not a node");e=this.item}return Gt.cast(new An(this.DOMAdapter.getProperty(e,"baseURI")||""))});_("document-uri",[[ci,"?"]],function(e){if(e!=null){var t=this.DOMAdapter.getProperty;if(t(e,"nodeType")==9)return Gt.cast(new An(t(e,"documentURI")||""))}return null});_("resolve-uri",[[An,"?"],[An,"",true]],function(e,t){var t;if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new O("XPTY0004","resolve-uri() function called when the context item is not a node");t=new An(this.DOMAdapter.getProperty(this.item,"baseURI")||"")}if(e==null)return null;if(e.valueOf()==""||e.valueOf().charAt(0)=="#")return Gt.cast(t);var n=Gt.cast(e);if(n.scheme)return n;var i=Gt.cast(t);n.scheme=i.scheme;if(!n.authority){n.authority=i.authority;if(n.path.charAt(0)!="/"){var r=n.path.split("/"),o=i.path.split("/");o.pop();var a=o[0]==""?1:0;for(var u=0,s=r.length;u<s;u++){if(r[u]==".."){if(o.length>a)o.pop();else{o.push(r[u]);a++}}else if(r[u]!=".")o.push(r[u])}if(r[--u]==".."||r[u]==".")o.push("");n.path=o.join("/")}}return n});_("true",[],function(){return new Vt(true)});_("false",[],function(){return new Vt(false)});_("not",[[li,"*"]],function(e){return new Vt(!ki(e,this))});_("position",[],function(){return new qn(this.position)});_("last",[],function(){return new qn(this.size)});_("current-dateTime",[],function(){return this.dateTime});_("current-date",[],function(){return Lt.cast(this.dateTime)});_("current-time",[],function(){return Sn.cast(this.dateTime)});_("implicit-timezone",[],function(){return this.timezone});_("default-collation",[],function(){return new An(this.staticContext.defaultCollationName)});_("static-base-uri",[],function(){return Gt.cast(new An(this.staticContext.baseURI||""))});_("years-from-duration",[[fn,"?"]],function(e){return Ai(e,"year")});_("months-from-duration",[[fn,"?"]],function(e){return Ai(e,"month")});_("days-from-duration",[[fn,"?"]],function(e){return Ai(e,"day")});_("hours-from-duration",[[fn,"?"]],function(e){return Ai(e,"hours")});_("minutes-from-duration",[[fn,"?"]],function(e){return Ai(e,"minutes")});_("seconds-from-duration",[[fn,"?"]],function(e){return Ai(e,"seconds")});_("year-from-dateTime",[[jt,"?"]],function(e){return Si(e,"year")});_("month-from-dateTime",[[jt,"?"]],function(e){return Si(e,"month")});_("day-from-dateTime",[[jt,"?"]],function(e){return Si(e,"day")});_("hours-from-dateTime",[[jt,"?"]],function(e){return Si(e,"hours")});_("minutes-from-dateTime",[[jt,"?"]],function(e){return Si(e,"minutes")});_("seconds-from-dateTime",[[jt,"?"]],function(e){return Si(e,"seconds")});_("timezone-from-dateTime",[[jt,"?"]],function(e){return Si(e,"timezone")});_("year-from-date",[[Lt,"?"]],function(e){return Si(e,"year")});_("month-from-date",[[Lt,"?"]],function(e){return Si(e,"month")});_("day-from-date",[[Lt,"?"]],function(e){return Si(e,"day")});_("timezone-from-date",[[Lt,"?"]],function(e){return Si(e,"timezone")});_("hours-from-time",[[Sn,"?"]],function(e){return Si(e,"hours")});_("minutes-from-time",[[Sn,"?"]],function(e){return Si(e,"minutes")});_("seconds-from-time",[[Sn,"?"]],function(e){return Si(e,"seconds")});_("timezone-from-time",[[Sn,"?"]],function(e){return Si(e,"timezone")});_("adjust-dateTime-to-timezone",[[jt,"?"],[Cn,"?",true]],function(e,t){return Xi(e,arguments.length>1&&t!=null?arguments.length>1?t:this.timezone:null)});_("adjust-date-to-timezone",[[Lt,"?"],[Cn,"?",true]],function(e,t){return Xi(e,arguments.length>1&&t!=null?arguments.length>1?t:this.timezone:null)});_("adjust-time-to-timezone",[[Sn,"?"],[Cn,"?",true]],function(e,t){return Xi(e,arguments.length>1&&t!=null?arguments.length>1?t:this.timezone:null)});function Ai(e,t){if(e==null)return null;var n=e[t]*(e.negative?-1:1);return t=="seconds"?new on(n):new qn(n)}function Si(e,t){if(e==null)return null;if(t=="timezone"){var n=e.timezone;if(n==null)return null;return new Cn(0,s.abs(~~(n/60)),s.abs(n%60),0,n<0)}else{var i=e[t];if(!(e instanceof Lt)){if(t=="hours")if(i==24)i=0}if(!(e instanceof Sn))i*=e.negative?-1:1;return t=="seconds"?new on(i):new qn(i)}}function Xi(e,t){if(e==null)return null;var n;if(e instanceof Lt)n=new Lt(e.year,e.month,e.day,e.timezone,e.negative);else if(e instanceof Sn)n=new Sn(e.hours,e.minutes,e.seconds,e.timezone,e.negative);else n=new jt(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative);if(t==null)n.timezone=null;else{var i=Ni(t)/60;if(e.timezone!=null){var r=i-e.timezone;if(e instanceof Lt){if(r<0)n.day--}else{n.minutes+=r%60;n.hours+=~~(r/60)}rn(n)}n.timezone=i}return n}_("name",[[ci,"?",true]],function(e){if(!arguments.length){if(!this.DOMAdapter.isNode(this.item))throw new O("XPTY0004","name() function called when the context item is not a node");e=this.item}else if(e==null)return new An("");var t=S["node-name"].call(this,e);return new An(t==null?"":t.toString())});_("local-name",[[ci,"?",true]],function(e){if(!arguments.length){if(!this.DOMAdapter.isNode(this.item))throw new O("XPTY0004","local-name() function called when the context item is not a node");e=this.item}else if(e==null)return new An("");return new An(this.DOMAdapter.getProperty(e,"localName")||"")});_("namespace-uri",[[ci,"?",true]],function(e){if(!arguments.length){if(!this.DOMAdapter.isNode(this.item))throw new O("XPTY0004","namespace-uri() function called when the context item is not a node");e=this.item}else if(e==null)return Gt.cast(new An(""));return Gt.cast(new An(this.DOMAdapter.getProperty(e,"namespaceURI")||""))});_("number",[[zt,"?",true]],function(e){if(!arguments.length){if(!this.item)throw new O("XPDY0002");e=Yi([this.item],this)[0]}var t=new un(d);if(e!=null){try{t=un.cast(e)}catch(e){}}return t});_("lang",[[An,"?"],[ci,"",true]],function(e,t){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new O("XPTY0004","lang() function called when the context item is not a node");t=this.item}var n=this.DOMAdapter.getProperty;if(n(t,"nodeType")==2)t=n(t,"ownerElement");for(var i;t;t=n(t,"parentNode"))if(i=n(t,"attributes"))for(var r=0,o=i.length;r<o;r++)if(n(i[r],"nodeName")=="xml:lang")return new Vt(n(i[r],"value").replace(/-.+/,"").toLowerCase()==e.valueOf().replace(/-.+/,"").toLowerCase());return new Vt(false)});_("root",[[ci,"?",true]],function(e){if(!arguments.length){if(!this.DOMAdapter.isNode(this.item))throw new O("XPTY0004","root() function called when the context item is not a node");e=this.item}else if(e==null)return null;var t=this.DOMAdapter.getProperty;if(t(e,"nodeType")==2)e=t(e,"ownerElement");for(var n=e;n;n=t(e,"parentNode"))e=n;return e});_("abs",[[un,"?"]],function(e){return new on(s.abs(e))});_("ceiling",[[un,"?"]],function(e){return new on(s.ceil(e))});_("floor",[[un,"?"]],function(e){return new on(s.floor(e))});_("round",[[un,"?"]],function(e){return new on(s.round(e))});_("round-half-to-even",[[un,"?"],[qn,"",true]],function(e,t){var n=arguments.length>1?t.valueOf():0;if(n<0){var i=new qn(s.pow(10,-n)),r=s.round(Y["numeric-divide"].call(this,e,i)),o=new qn(r);nDecimal=s.abs(Y["numeric-subtract"].call(this,o,Y["numeric-divide"].call(this,e,i)));return Y["numeric-multiply"].call(this,Y["numeric-add"].call(this,o,new on(nDecimal==.5&&r%2?-1:0)),i)}else{var i=new qn(s.pow(10,n)),r=s.round(Y["numeric-multiply"].call(this,e,i)),o=new qn(r);nDecimal=s.abs(Y["numeric-subtract"].call(this,o,Y["numeric-multiply"].call(this,e,i)));return Y["numeric-divide"].call(this,Y["numeric-add"].call(this,o,new on(nDecimal==.5&&r%2?-1:0)),i)}});_("resolve-QName",[[An,"?"],[mi]],function(e,t){if(e==null)return null;var n=e.valueOf(),i=n.match(Mn);if(!i)throw new O("FOCA0002","Invalid QName '"+n+"'");var r=i[1]||null,o=i[2],a=this.DOMAdapter.lookupNamespaceURI(t,r);if(r!=null&&!a)throw new O("FONS0004","Namespace prefix '"+r+"' has not been declared");return new Rn(r,o,a||null)});_("QName",[[An,"?"],[An]],function(e,t){var n=t.valueOf(),i=n.match(Mn);if(!i)throw new O("FOCA0002","Invalid QName '"+n+"'");return new Rn(i[1]||null,i[2]||null,e==null?"":e.valueOf())});_("prefix-from-QName",[[Rn,"?"]],function(e){if(e!=null){if(e.prefix)return new oi(e.prefix)}return null});_("local-name-from-QName",[[Rn,"?"]],function(e){if(e==null)return null;return new oi(e.localName)});_("namespace-uri-from-QName",[[Rn,"?"]],function(e){if(e==null)return null;return Gt.cast(new An(e.namespaceURI||""))});_("namespace-uri-for-prefix",[[An,"?"],[mi]],function(e,t){var n=e==null?"":e.valueOf(),i=this.DOMAdapter.lookupNamespaceURI(t,n||null);return i==null?null:Gt.cast(new An(i))});_("in-scope-prefixes",[[mi]],function(e){throw"Function '"+"in-scope-prefixes"+"' not implemented"});_("boolean",[[li,"*"]],function(e){return new Vt(ki(e,this))});_("index-of",[[zt,"*"],[zt],[An,"",true]],function(e,t,n){if(!e.length||t==null)return[];var i=t;if(i instanceof Yn)i=An.cast(i);var r=[];for(var o=0,a=e.length,u;o<a;o++){u=e[o];if(u instanceof Yn)u=An.cast(u);if(u.valueOf()===i.valueOf())r.push(new qn(o+1))}return r});_("empty",[[li,"*"]],function(e){return new Vt(!e.length)});_("exists",[[li,"*"]],function(e){return new Vt(!!e.length)});_("distinct-values",[[zt,"*"],[An,"",true]],function(e,t){if(!e.length)return null;var n=[];for(var i=0,r=e.length,o;i<r;i++){o=e[i];if(o instanceof Yn)o=An.cast(o);for(var a=0,u=n.length,s,f=false;a<u&&!f;a++){s=n[a];if(s instanceof Yn)s=An.cast(s);if(s.valueOf()===o.valueOf())f=true}if(!f)n.push(e[i])}return n});_("insert-before",[[li,"*"],[qn],[li,"*"]],function(e,t,n){if(!e.length)return n;if(!n.length)return e;var i=e.length,r=t.valueOf();if(r<1)r=1;else if(r>i)r=i+1;var o=[];for(var a=0;a<i;a++){if(r==a+1)o=o.concat(n);o.push(e[a])}if(r==a+1)o=o.concat(n);return o});_("remove",[[li,"*"],[qn]],function(e,t){if(!e.length)return[];var n=e.length,i=t.valueOf();if(i<1||i>n)return e;var r=[];for(var o=0;o<n;o++)if(i!=o+1)r.push(e[o]);return r});_("reverse",[[li,"*"]],function(e){e.reverse();return e});_("subsequence",[[li,"*"],[un,""],[un,"",true]],function(e,t,n){var i=s.round(t),r=arguments.length>2?s.round(n):e.length-i+1;return e.slice(i-1,i-1+r)});_("unordered",[[li,"*"]],function(e){return e});_("zero-or-one",[[li,"*"]],function(e){if(e.length>1)throw new O("FORG0003");return e});_("one-or-more",[[li,"*"]],function(e){if(!e.length)throw new O("FORG0004");return e});_("exactly-one",[[li,"*"]],function(e){if(e.length!=1)throw new O("FORG0005");return e});_("deep-equal",[[li,"*"],[li,"*"],[An,"",true]],function(e,t,n){throw"Function '"+"deep-equal"+"' not implemented"});_("count",[[li,"*"]],function(e){return new qn(e.length)});_("avg",[[zt,"*"]],function(e){if(!e.length)return null;try{var t=e[0];if(t instanceof Yn)t=un.cast(t);for(var n=1,i=e.length,r;n<i;n++){r=e[n];if(r instanceof Yn)r=un.cast(r);t=ce["+"](t,r,this)}return de["div"](t,new qn(i),this)}catch(e){throw e.code!="XPTY0004"?e:new O("FORG0006","Input to avg() contains a mix of types")}});_("max",[[zt,"*"],[An,"",true]],function(e,t){if(!e.length)return null;try{var n=e[0];for(var i=1,r=e.length;i<r;i++)if(ae["ge"](e[i],n,this).valueOf())n=e[i];return n}catch(e){throw e.code!="XPTY0004"?e:new O("FORG0006","Input to max() contains a mix of not comparable values")}});_("min",[[zt,"*"],[An,"",true]],function(e,t){if(!e.length)return null;try{var n=e[0];for(var i=1,r=e.length;i<r;i++)if(ae["le"](e[i],n,this).valueOf())n=e[i];return n}catch(e){throw e.code!="XPTY0004"?e:new O("FORG0006","Input to min() contains a mix of not comparable values")}});_("sum",[[zt,"*"],[zt,"?",true]],function(e,t){if(!e.length){if(arguments.length>1)return t;else return new un(0);return null}try{var n=e[0];if(n instanceof Yn)n=un.cast(n);for(var i=1,r=e.length,o;i<r;i++){o=e[i];if(o instanceof Yn)o=un.cast(o);n=ce["+"](n,o,this)}return n}catch(e){throw e.code!="XPTY0004"?e:new O("FORG0006","Input to sum() contains a mix of types")}});_("id",[[An,"*"],[ci,"",true]],function(e,t){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new O("XPTY0004","id() function called when the context item is not a node");t=this.item}var n=S["root"].call(this,t);if(this.DOMAdapter.getProperty(n,"nodeType")!=9)throw new O("FODC0001");var i=[];for(var r=0;r<e.length;r++)for(var o=0,a=g(e[r]).split(/\s+/),u=a.length;o<u;o++)if((t=this.DOMAdapter.getElementById(n,a[o]))&&T(i,t)==-1)i.push(t);return _i(i,this)});_("idref",[[An,"*"],[ci,"",true]],function(e,t){throw"Function '"+"idref"+"' not implemented"});_("doc",[[An,"?",true]],function(e){throw"Function '"+"doc"+"' not implemented"});_("doc-available",[[An,"?",true]],function(e){throw"Function '"+"doc-available"+"' not implemented"});_("collection",[[An,"?",true]],function(e){throw"Function '"+"collection"+"' not implemented"});_("element-with-id",[[An,"*"],[ci,"",true]],function(e,t){throw"Function '"+"element-with-id"+"' not implemented"});function ki(e,t){if(!e.length)return false;var n=e[0];if(t.DOMAdapter.isNode(n))return true;if(e.length==1){if(n instanceof Vt)return n.value.valueOf();if(n instanceof An)return!!n.valueOf().length;if(Ct(n))return!(p(n.valueOf())||n.valueOf()==0);throw new O("FORG0006","Effective boolean value is defined only for sequences containing booleans, strings, numbers, URIs, or nodes")}throw new O("FORG0006","Effective boolean value is not defined for a sequence of two or more items")}function Yi(e,t){var n=[];for(var i=0,r=e.length,o,a;i<r;i++){o=e[i];a=null;if(o==null)a=null;else if(t.DOMAdapter.isNode(o)){var u=t.DOMAdapter.getProperty;switch(u(o,"nodeType")){case 1:a=new Yn(u(o,"textContent"));break;case 2:a=new Yn(u(o,"value"));break;case 3:case 4:case 8:a=new Yn(u(o,"data"));break;case 7:a=new Yn(u(o,"data"));break;case 9:var s=u(o,"documentElement");a=new Yn(s?u(s,"textContent"):"");break}}else if(o instanceof zt)a=o;if(a!=null)n.push(a)}return n}function _i(e,t){return e.sort(function(e,n){var i=t.DOMAdapter.compareDocumentPosition(e,n);return i&2?1:i&4?-1:0})}_("codepoints-to-string",[[qn,"*"]],function(t){var n=[];for(var i=0,r=t.length;i<r;i++)n.push(e.fromCharCode(t[i]));return new An(n.join(""))});_("string-to-codepoints",[[An,"?"]],function(e){if(e==null)return null;var t=e.valueOf();if(t=="")return[];var n=[];for(var i=0,r=t.length;i<r;i++)n.push(new qn(t.charCodeAt(i)));return n});_("compare",[[An,"?"],[An,"?"],[An,"",true]],function(e,t,n){if(e==null||t==null)return null;var i=this.staticContext.defaultCollationName,r;if(arguments.length>2)i=n.valueOf();r=i==I+"/collation/codepoint"?zi:this.staticContext.getCollation(i);if(!r)throw new O("FOCH0002","Unknown collation "+"{"+i+"}");return new qn(r.compare(e.valueOf(),t.valueOf()))});_("codepoint-equal",[[An,"?"],[An,"?"]],function(e,t){if(e==null||t==null)return null;return new Vt(e.valueOf()==t.valueOf())});_("concat",null,function(){if(arguments.length<2)throw new O("XPST0017","Function concat() must have at least 2 arguments");var e=[];for(var t=0,n=arguments.length,i;t<n;t++){i=arguments[t];ht(this,i,"?","each argument of concat()");if(i.length)e[e.length]=An.cast(Yi(i,this)[0]).valueOf()}return new An(e.join(""))});_("string-join",[[An,"*"],[An]],function(e,t){return new An(e.join(t))});_("substring",[[An,"?"],[un],[un,"",true]],function(e,t,n){var i=e==null?"":e.valueOf(),r=s.round(t)-1,o=arguments.length>2?r+s.round(n):i.length;return new An(o>r?i.substring(r,o):"")});_("string-length",[[An,"?",true]],function(e){if(!arguments.length){if(!this.item)throw new O("XPDY0002");e=An.cast(Yi([this.item],this)[0])}return new qn(e==null?0:e.valueOf().length)});_("normalize-space",[[An,"?",true]],function(e){if(!arguments.length){if(!this.item)throw new O("XPDY0002");e=An.cast(Yi([this.item],this)[0])}return new An(e==null?"":g(e).replace(/\s\s+/g," "))});_("normalize-unicode",[[An,"?"],[An,"",true]],function(e,t){throw"Function '"+"normalize-unicode"+"' not implemented"});_("upper-case",[[An,"?"]],function(e){return new An(e==null?"":e.valueOf().toUpperCase())});_("lower-case",[[An,"?"]],function(e){return new An(e==null?"":e.valueOf().toLowerCase())});_("translate",[[An,"?"],[An],[An]],function(e,t,n){if(e==null)return new An("");var i=e.valueOf().split(""),r=t.valueOf().split(""),o=n.valueOf().split(""),a=o.length,u=[];for(var s=0,f=i.length,l;s<f;s++)if((l=r.indexOf(i[s]))==-1)u[u.length]=i[s];else if(l<a)u[u.length]=o[l];return new An(u.join(""))});_("encode-for-uri",[[An,"?"]],function(e){return new An(e==null?"":window.encodeURIComponent(e))});_("iri-to-uri",[[An,"?"]],function(e){return new An(e==null?"":window.encodeURI(window.decodeURI(e)))});_("escape-html-uri",[[An,"?"]],function(e){if(e==null||e.valueOf()=="")return new An("");var t=e.valueOf().split("");for(var n=0,i=t.length,r;n<i;n++)if((r=t[n].charCodeAt(0))<32||r>126)t[n]=window.encodeURIComponent(t[n]);return new An(t.join(""))});_("contains",[[An,"?"],[An,"?"],[An,"",true]],function(e,t,n){return new Vt((e==null?"":e.valueOf()).indexOf(t==null?"":t.valueOf())>=0)});_("starts-with",[[An,"?"],[An,"?"],[An,"",true]],function(e,t,n){return new Vt((e==null?"":e.valueOf()).indexOf(t==null?"":t.valueOf())==0)});_("ends-with",[[An,"?"],[An,"?"],[An,"",true]],function(e,t,n){var i=e==null?"":e.valueOf(),r=t==null?"":t.valueOf();return new Vt(i.indexOf(r)==i.length-r.length)});_("substring-before",[[An,"?"],[An,"?"],[An,"",true]],function(e,t,n){var i=e==null?"":e.valueOf(),r=t==null?"":t.valueOf(),o;return new An((o=i.indexOf(r))>=0?i.substring(0,o):"")});_("substring-after",[[An,"?"],[An,"?"],[An,"",true]],function(e,t,n){var i=e==null?"":e.valueOf(),r=t==null?"":t.valueOf(),o;return new An((o=i.indexOf(r))>=0?i.substring(o+r.length):"")});function Ui(e,t){var n="---",i="---",r="-----",a="A-Z_a-z\\-.0-9"+n+"-"+i+"-"+r,u="A-Z_a-z"+n+i+r;e=e.replace(/\[\\i-\[:\]\]/g,"["+u+"]").replace(/\[\\c-\[:\]\]/g,"["+a+"]").replace(/\\i/g,"[:"+u+"]").replace(/\\I/g,"[^:"+u+"]").replace(/\\c/g,"[:"+a+"]").replace(/\\C/g,"[^:"+a+"]");if(t&&!t.match(/^[smix]+$/))throw new O("FORX0001");var s=t.indexOf("s")>=0,f=t.indexOf("x")>=0;if(s||f){t=t.replace(/[sx]/g,"");var l=[],c=/\s/;for(var p=0,h=e.length,d=false,m,w="";p<h;p++){m=e.charAt(p);if(w!="\\"){if(m=="[")d=true;else if(m=="]")d=false}if(d||!(f&&c.test(m))){if(!d&&(s&&m=="."&&w!="\\"))l[l.length]="(?:.|\\s)";else l[l.length]=m}w=m}e=l.join("")}return new o(e,t+"g")}_("matches",[[An,"?"],[An],[An,"",true]],function(e,t,n){var i=e==null?"":e.valueOf(),r=Ui(t.valueOf(),arguments.length>2?n.valueOf():"");return new Vt(r.test(i))});_("replace",[[An,"?"],[An],[An],[An,"",true]],function(e,t,n,i){var r=e==null?"":e.valueOf(),o=Ui(t.valueOf(),arguments.length>3?i.valueOf():"");return new Vt(r.replace(o,n.valueOf()))});_("tokenize",[[An,"?"],[An],[An,"",true]],function(e,t,n){var i=e==null?"":e.valueOf(),r=Ui(t.valueOf(),arguments.length>2?n.valueOf():"");var o=[];for(var a=0,u=i.split(r),s=u.length;a<s;a++)o.push(new An(u[a]));return o});_("trace",[[li,"*"],[An]],function(e,t){var n=window.console;
if(n&&n.log)n.log(t.valueOf(),e);return e});var zi=new C;zi.equals=function(e,t){return e==t};zi.compare=function(e,t){return e==t?0:e>t?1:-1};var Ci=function(){};Ci.prototype.nodeType=2;Ci.prototype.nodeName=Ci.prototype.nodeValue=Ci.prototype.ownerDocument=Ci.prototype.localName=Ci.prototype.namespaceURI=Ci.prototype.prefix=Ci.prototype.attributes=Ci.prototype.childNodes=Ci.prototype.firstChild=Ci.prototype.lastChild=Ci.prototype.previousSibling=Ci.prototype.nextSibling=Ci.prototype.parentNode=Ci.prototype.name=Ci.prototype.specified=Ci.prototype.value=Ci.prototype.ownerElement=null;function Gi(){}Gi.prototype=new b;var Fi=new M;Gi.prototype.getProperty=function(e,t){if(t in e)return e[t];if(t=="baseURI"){var n="",i=Fi.getFunction("{"+"http://www.w3.org/2005/xpath-functions"+"}"+"resolve-uri"),r=Fi.getDataType("{"+"http://www.w3.org/2001/XMLSchema"+"}"+"string");for(var o=e,a;o;o=o.parentNode)if(o.nodeType==1&&(a=o.getAttribute("xml:base")))n=i(new r(a),new r(n)).toString();return n}else if(t=="textContent"){var u=[];(function(e){for(var t=0,n;n=e.childNodes[t];t++)if(n.nodeType==3||n.nodeType==4)u.push(n.data);else if(n.nodeType==1&&n.firstChild)arguments.callee(n)})(e);return u.join("")}};Gi.prototype.compareDocumentPosition=function(e,t){if("compareDocumentPosition"in e)return e.compareDocumentPosition(t);if(t==e)return 0;var n=null,i=null,r,o,a,u,f;if(e.nodeType==2){n=e;e=this.getProperty(n,"ownerElement")}if(t.nodeType==2){i=t;t=this.getProperty(i,"ownerElement")}if(n&&i&&e&&e==t){for(u=0,r=this.getProperty(e,"attributes"),f=r.length;u<f;u++){o=r[u];if(o==n)return 32|4;if(o==i)return 32|2}}var l=[],c,p,h=[],d,m;if(n)l.push(n);for(a=e;a;a=a.parentNode)l.push(a);if(i)h.push(i);for(a=t;a;a=a.parentNode)h.push(a);if((e.ownerDocument||e)!=(t.ownerDocument||t)||l[l.length-1]!=h[h.length-1])return 32|1;for(u=s.min(c=l.length,d=h.length);u;--u)if((p=l[--c])!=(m=h[--d])){if(p.nodeType==2)return 4;if(m.nodeType==2)return 2;if(!m.nextSibling)return 4;if(!p.nextSibling)return 2;for(a=m.previousSibling;a;a=a.previousSibling)if(a==p)return 4;return 2}return c<d?4|16:2|8};Gi.prototype.lookupNamespaceURI=function(e,t){if("lookupNamespaceURI"in e)return e.lookupNamespaceURI(t);for(;e&&e.nodeType!=9;e=e.parentNode)if(t==this.getProperty(oChild,"prefix"))return this.getProperty(e,"namespaceURI");else if(e.nodeType==1)for(var n=this.getProperty(e,"attributes"),i=0,r=n.length,o="xmlns"+":"+t;i<r;i++)if(this.getProperty(n[i],"nodeName")==o)return this.getProperty(n[i],"value");return null};Gi.prototype.getElementsByTagNameNS=function(e,t,n){if("getElementsByTagNameNS"in e)return e.getElementsByTagNameNS(t,n);var i=[],r="*"==t,o="*"==n;(function(e){for(var a=0,u;u=e.childNodes[a];a++)if(u.nodeType==1){if((o||n==this.getProperty(u,"localName"))&&(r||t==this.getProperty(u,"namespaceURI")))i[i.length]=u;if(u.firstChild)arguments.callee(u)}})(e);return i};var qi=new Gi;var Ki=new Gi;Ki.getProperty=function(e,t){if(t=="localName"){if(e.nodeType==1)return e.localName.toLowerCase()}if(t=="namespaceURI")return e.nodeType==1?"http://www.w3.org/1999/xhtml":null;return Gi.prototype.getProperty.call(this,e,t)};var Vi=new Gi;Vi.getProperty=function(e,t){if(t=="localName"){if(e.nodeType==1)return e.nodeName.toLowerCase()}if(t=="prefix")return null;if(t=="namespaceURI")return e.nodeType==1?"http://www.w3.org/1999/xhtml":null;if(t=="textContent")return e.innerText;if(t=="attributes"&&e.nodeType==1){var n=[];for(var i=0,r=e.attributes,o=r.length,a,u;i<o;i++){a=r[i];if(a.specified){u=new Ci;u.ownerElement=e;u.ownerDocument=e.ownerDocument;u.specified=true;u.value=u.nodeValue=a.nodeValue;u.name=u.nodeName=u.localName=a.nodeName.toLowerCase();n[n.length]=u}}return n}return Gi.prototype.getProperty.call(this,e,t)};var Bi=new Gi;Bi.getProperty=function(e,t){if(t=="localName"){if(e.nodeType==7)return null;if(e.nodeType==1)return e.baseName}if(t=="prefix"||t=="namespaceURI")return e[t]||null;if(t=="textContent")return e.text;if(t=="attributes"&&e.nodeType==1){var n=[];for(var i=0,r=e.attributes,o=r.length,a,u;i<o;i++){a=r[i];if(a.specified){u=new Ci;u.nodeType=2;u.ownerElement=e;u.ownerDocument=e.ownerDocument;u.specified=true;u.value=u.nodeValue=a.nodeValue;u.name=u.nodeName=a.nodeName;u.localName=a.baseName;u.prefix=a.prefix||null;u.namespaceURI=a.namespaceURI||null;n[n.length]=u}}return n}return Gi.prototype.getProperty.call(this,e,t)};Bi.getElementById=function(e,t){return e.nodeFromID(t)};var Li=window.jQuery,$i=window.document,Hi=!!$i.namespaces&&!$i.createElementNS,Zi=!Hi&&$i.documentElement.namespaceURI!="http://www.w3.org/1999/xhtml";var Qi=new M,ji=new M;Qi.baseURI=$i.location.href;Qi.defaultFunctionNamespace="http://www.w3.org/2005/xpath-functions";Qi.defaultElementNamespace="http://www.w3.org/1999/xhtml";ji.defaultFunctionNamespace=Qi.defaultFunctionNamespace;function Ji(t,n,i){if(typeof n=="undefined"||n===null)n="";var r=t[0];if(typeof r=="undefined")r=null;var o=r&&(r.nodeType==9?r:r.ownerDocument).createElement("div").tagName=="DIV"?Qi:ji;o.namespaceResolver=i;var a=new z(e(n),o);o.namespaceResolver=null;var u,s=new Li,f=qi;if(Hi)f=o==Qi?Vi:Bi;else if(Zi&&o==Qi)f=Ki;u=a.evaluate(new R(o,r,null,f));for(var l=0,c=u.length,p;l<c;l++)s.push(f.isNode(p=u[l])?p:M.xs2js(p));return s}var Wi={};Wi.xpath=function(e,t,n){return Ji(e instanceof Li?e:new Li(e),t,n)};Li.extend(Li,Wi);Wi={};Wi.xpath=function(e,t){return Ji(this,e,t)};Li.extend(Li.prototype,Wi)})();